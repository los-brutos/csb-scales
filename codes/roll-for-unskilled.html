<!-- Roll for unskilled carrier/hobby -->
${#concat(
  ?{diff:"Difficulté"|2,"Normal"|0,"Facile"|4,"Difficile"},
  ?{modificateur:"Modificateur"[number]|0}
)}$

${#sante:=healthMalus}$
${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$
${#seuil:= 10 - 6 - diff}$        
${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$

<h3>Jet ${!(0 == diff ? "facile" : (2 == diff ? "normal":"difficile"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : ""}$</h3>
<table>
  <tbody>
    <tr>
      <td><h4>Jet du dé</h4></td>
      <td>
        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$
      </td>
    </tr>
    <tr>
      <td colspan="2">
        <p style="padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? "color: var(--color-level-success); border: solid 1px var(--color-level-success)\">Réussite" : "color: var(--color-level-error); border: solid 1px var(--color-level-error)\">Echec"}$</p>
      </td>
    </tr>
  </tbody>
</table>

<!-- remise à zéro de la caractéristique utilisée -->
${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$