{
  "name": "A2 Snipe",
  "img": "modules/csb-scales/scenarios/A2-SNIPE/banner.jpg",
  "caption": "",
  "sort": 30,
  "description": "<p>Verbe anglais signifiant tirer sur quelqu’un en restant caché niais également critiquer par en dessous.</p>",
  "actors": [
    {
      "folder": "CamixvH2froIvkRV",
      "name": "Batou Nemma",
      "type": "character",
      "_id": "l33iKVaCmxHeqUHf",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Batou Nemma",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Batou Nemma",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708707498143,
        "modifiedTime": 1708707500848,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "CamixvH2froIvkRV",
      "name": "Johanna Wallace",
      "type": "character",
      "_id": "WBYcrDPq3q6dErXs",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Johanna Wallace",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Johanna Wallace",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708697519417,
        "modifiedTime": 1708697523668,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "CamixvH2froIvkRV",
      "name": "Joseph Mobondi dit \"Oncle Jo\"",
      "type": "character",
      "_id": "OF0NCWVBeJHFXA9x",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Joseph Mobondi dit \"Oncle Jo\"",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Joseph Mobondi dit \"Oncle Jo\"",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708697564792,
        "modifiedTime": 1708697568420,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "CamixvH2froIvkRV",
      "name": "Les beasts",
      "type": "character",
      "_id": "52SewhDyVLPyPCuX",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Les beasts",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Les beasts",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708708367817,
        "modifiedTime": 1708708375268,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "CamixvH2froIvkRV",
      "name": "Les deux énormes Haïtiens",
      "type": "character",
      "_id": "A2XtHFT6ysQ5rKe9",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Les deux énormes Haïtiens",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Les deux énormes Haïtiens",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708707400725,
        "modifiedTime": 1708707403370,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "uZ8UfqmMAPMkHl5I",
      "name": "Brain-Chuck",
      "type": "character",
      "_id": "5Hm4o8V83Q9cATyp",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Brain-Chuck",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Brain-Chuck",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708697447037,
        "modifiedTime": 1708697449826,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "uZ8UfqmMAPMkHl5I",
      "name": "Bubble-Jack",
      "type": "character",
      "_id": "xevErWPA0NId3kWA",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Bubble-Jack",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Bubble-Jack",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708697348915,
        "modifiedTime": 1708697351796,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "uZ8UfqmMAPMkHl5I",
      "name": "Lewis \"F.F.\" Johnson",
      "type": "character",
      "_id": "97tkZXLKl59SwQx7",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Lewis \"F.F.\" Johnson",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Lewis \"F.F.\" Johnson",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 100000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708697279171,
        "modifiedTime": 1708697294266,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "uZ8UfqmMAPMkHl5I",
      "name": "Vernon Reid",
      "type": "character",
      "_id": "trmNxeN1LiPY7H3Y",
      "img": "icons/svg/mystery-man.svg",
      "system": {
        "hidden": [
          {
            "name": "healthMalus",
            "value": "${min(\n  (\n    10 == stun ? -2 : (\n      20 == stun ? -2 : (\n        60 == health ? -1 : (\n          70 == health ? -2 : 0\n        )\n      )\n    )\n  )\n)}$"
          },
          {
            "name": "stunStatus",
            "value": "${switchCase(stun, \"0\", \"Tout va bien\", \"10\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite au cours du tour suivant et uniquement celui-ci.\", \"20\", \"Le personnage subit un malus de 2 points à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. \\nS'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", \"30\", \"Le personnage s'évanouit pour (d10) minutes s’il est convenablement soigné. \\nSans aucune aide extérieure l'évanouissement sera cinq fois plus long.\")}$"
          },
          {
            "name": "healthStatus",
            "value": "${switchCase(health, \"0\", \"Tout va bien\", \"50\", \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. \\nLe sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", \"60\", \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. \\nLa douleur cause un malus de 1 point à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). \\nUne seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", \"70\", \"Le personnage est blessé à un endroit grave. \\nLa douleur et la gêne causées par la blessure donnent un malus de 2 points à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital). \\nUne seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", \"80\", \"Le personnage est aux portes de la mort. \\nIl lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. \\nIl ne pourra être réanimé qu'avec des moyens médicaux importants. \\nS'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience. \\nUn second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", \"90\", \"Le personnage est mortellement touché. \\nIl peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$"
          },
          {
            "name": "ccArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "distanceArmorEquiped",
            "value": "${0}$"
          },
          {
            "name": "maxMana",
            "value": "${2 == generation ? 25 : 3 == generation ? 100 : 4 == generation ? 500 : 5}$"
          },
          {
            "name": "recoveryMana",
            "value": "${4 == generation ? \"1 par minute\" : 3 == generation ? \"1 par minute\" : 2 == generation ? \"1 par heure\" : 1 == generation ? \"1 par heure\" : \"1 par jour\"}$"
          },
          {
            "name": "initiative",
            "value": "${fightnessForAttack + first(fetchFromDynamicTable('characteristics', 'value', 'name', characteristicForInitiative), 0)}$"
          },
          {
            "name": "resistanceModificator",
            "value": "${first(fetchFromDynamicTable('characteristics', 'value', 'name', resistanceCharacteristic), 0)}$"
          },
          {
            "name": "fightnessForAttack",
            "value": "${fightness > 0 ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          },
          {
            "name": "fightnessForDefense",
            "value": "${0 > fightness ? fightness : fightnessPowerCheckbox ? 0 : fightness}$"
          }
        ],
        "header": {
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Type de personnage",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "type",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Etre humain"
                    },
                    {
                      "key": "1",
                      "value": "Etre magique"
                    },
                    {
                      "key": "2",
                      "value": "Dragon"
                    },
                    {
                      "key": "3",
                      "value": "Technomancien"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "1 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Emergence",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "emergence",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "0",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Phase humaine"
                    },
                    {
                      "key": "1",
                      "value": "Phase de frémissement"
                    },
                    {
                      "key": "2",
                      "value": "Phase de la connaissance"
                    },
                    {
                      "key": "3",
                      "value": "Phase du voyage"
                    },
                    {
                      "key": "4",
                      "value": "Phase de la transformation"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "natureGM",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "Nature de l'être magique",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "displayNature",
                      "cssClass": "",
                      "role": "3",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": "Afficher la nature au joueur",
                      "defaultValue": null,
                      "size": "full-size",
                      "type": "checkbox",
                      "defaultChecked": false
                    }
                  ],
                  "flow": "horizontal",
                  "align": "right",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "2 == type ? true : false",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Génération",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "generation",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "1",
                  "size": "m-large",
                  "options": [
                    {
                      "key": "0",
                      "value": "Nouveau-né"
                    },
                    {
                      "key": "1",
                      "value": "Enfant dragon"
                    },
                    {
                      "key": "2",
                      "value": "Parent dragon"
                    },
                    {
                      "key": "3",
                      "value": "Grand-parent"
                    },
                    {
                      "key": "4",
                      "value": "Dragon céleste"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Famille",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "dragonFamily",
                  "cssClass": "",
                  "role": "3",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "options": [
                    {
                      "key": "Dragon argenté",
                      "value": "Dragon argenté"
                    },
                    {
                      "key": "Dragon asiatique",
                      "value": "Dragon asiatique"
                    },
                    {
                      "key": "Dragon blanc",
                      "value": "Dragon blanc"
                    },
                    {
                      "key": "Dragon bleu",
                      "value": "Dragon bleu"
                    },
                    {
                      "key": "Dragon doré",
                      "value": "Dragon doré"
                    },
                    {
                      "key": "Dragon féérique",
                      "value": "Dragon féérique"
                    },
                    {
                      "key": "Dragon noir",
                      "value": "Dragon noir"
                    },
                    {
                      "key": "Dragon rouge",
                      "value": "Dragon rouge"
                    },
                    {
                      "key": "Dragon vert",
                      "value": "Dragon vert"
                    },
                    {
                      "key": "Hydre",
                      "value": "Hydre"
                    },
                    {
                      "key": "Serpent à plumes",
                      "value": "Serpent à plumes"
                    },
                    {
                      "key": "Serpent de mer",
                      "value": "Serpent de mer"
                    },
                    {
                      "key": "Wyvern",
                      "value": "Wyvern"
                    }
                  ],
                  "tableKey": null,
                  "tableKeyColumn": null,
                  "tableLabelColumn": null,
                  "formulaKeyOptions": null,
                  "formulaLabelOptions": null,
                  "type": "select"
                }
              ],
              "flow": "grid-2",
              "align": "left",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "${1 == type ? switchCase(emergence, \"1\", \"Etre magique en phase de frémissement\", \"2\", \"Etre magique en phase de connaissance\", \"3\", \"Etre magique en phase du voyage\", \"4\", \"Etre magique en phase de transformation\", \"\") : 2 == type ? switchCase(generation, \"0\", \"Nouveau-né\", \"1\", \"Enfant dragon\", \"2\", \"Parent dragon\", \"3\", \"Grand-parent\", \"4\", \"Dragon céleste\", \"\") : 3 == type ? \"Technomancien\" : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": " ${2 == type ? dragonFamily : and(1 == type, displayNature) ? natureGM : \"\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "title",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [],
              "flow": "vertical",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "age",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Age",
                  "visibilityFormula": "",
                  "label": "Age",
                  "defaultValue": "25",
                  "size": "small",
                  "allowDecimal": false,
                  "minVal": "0",
                  "maxVal": "",
                  "allowRelative": false,
                  "showControls": false,
                  "controlsStyle": "hover",
                  "type": "numberField"
                },
                {
                  "key": "gender",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Genre",
                  "visibilityFormula": "",
                  "label": "Genre",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                },
                {
                  "key": "nationality",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Nationalité",
                  "visibilityFormula": "",
                  "label": "Nationalité",
                  "defaultValue": "",
                  "size": "full-size",
                  "charList": "",
                  "maxLength": "",
                  "type": "textField"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            }
          ],
          "key": "custom_header",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "body": {
          "contents": [
            {
              "key": "healthPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Etat de santé du personnage",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur étourdissement",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "stun",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${stunStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "10",
                          "value": "Légèrement sonné"
                        },
                        {
                          "key": "20",
                          "value": "Sonné"
                        },
                        {
                          "key": "30",
                          "value": "Assommé"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${stunStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "Moniteur de santé",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "bold",
                      "type": "label"
                    },
                    {
                      "key": "health",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "${healthStatus}$",
                      "visibilityFormula": "",
                      "label": "",
                      "defaultValue": "0",
                      "size": "full-size",
                      "options": [
                        {
                          "key": "0",
                          "value": "En bonne santé"
                        },
                        {
                          "key": "50",
                          "value": "Egratignure"
                        },
                        {
                          "key": "60",
                          "value": "Blessure légère"
                        },
                        {
                          "key": "70",
                          "value": "Blessure grave"
                        },
                        {
                          "key": "80",
                          "value": "Coma"
                        },
                        {
                          "key": "90",
                          "value": "Mort"
                        }
                      ],
                      "tableKey": null,
                      "tableKeyColumn": null,
                      "tableLabelColumn": null,
                      "formulaKeyOptions": null,
                      "formulaLabelOptions": null,
                      "type": "select"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "label": null,
                      "defaultValue": null,
                      "size": "full-size",
                      "icon": "",
                      "value": "${healthStatus}$",
                      "prefix": "",
                      "suffix": "",
                      "rollMessage": "",
                      "altRollMessage": "",
                      "style": "label",
                      "type": "label"
                    }
                  ],
                  "flow": "vertical",
                  "align": "justify",
                  "type": "panel"
                }
              ],
              "flow": "grid-2",
              "align": "center",
              "type": "panel"
            },
            {
              "key": "healthMalusPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "healthMalusLabel",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "Impact de l'état de santé :",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "bold",
                  "type": "label"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "label": null,
                  "defaultValue": null,
                  "size": "full-size",
                  "icon": "",
                  "value": "<strong>${healthMalus}$</strong>",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "style": "label",
                  "type": "label"
                }
              ],
              "flow": "horizontal",
              "align": "justify",
              "type": "panel"
            },
            {
              "key": "characterTabbedPanel",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "contents": [
                {
                  "key": "characterTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Description du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<strong>Description</strong>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristics",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [
                            {
                              "key": "name",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "charList": "",
                              "maxLength": "",
                              "type": "textField",
                              "align": "left",
                              "colName": "Caractéristiques"
                            },
                            {
                              "key": "value",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "valeur de -8 à +8",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "0",
                              "size": "small",
                              "allowDecimal": false,
                              "minVal": "",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField",
                              "align": "right",
                              "colName": "Valeurs"
                            }
                          ],
                          "head": true,
                          "deleteWarning": true,
                          "predefinedLines": [],
                          "canPlayerAdd": true,
                          "type": "dynamicTable"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "carriers",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Métiers",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Métiers"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Débutant"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Qualifié"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Expert"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                },
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            },
                            {
                              "key": "hobbies",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "Hobbies",
                              "visibilityFormula": "",
                              "rowLayout": [
                                {
                                  "key": "name",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "medium",
                                  "charList": "",
                                  "maxLength": "",
                                  "type": "textField",
                                  "align": "left",
                                  "colName": "Hobbies"
                                },
                                {
                                  "key": "level",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "4",
                                  "size": "full-size",
                                  "options": [
                                    {
                                      "key": "4",
                                      "value": "Amateur"
                                    },
                                    {
                                      "key": "2",
                                      "value": "Averti"
                                    },
                                    {
                                      "key": "0",
                                      "value": "Spécialiste"
                                    }
                                  ],
                                  "tableKey": null,
                                  "tableKeyColumn": null,
                                  "tableLabelColumn": null,
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "characteristic",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Choisir la caractéristique appropriée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": "full-size",
                                  "options": [],
                                  "tableKey": "characteristics",
                                  "tableKeyColumn": "name",
                                  "tableLabelColumn": "",
                                  "formulaKeyOptions": null,
                                  "formulaLabelOptions": null,
                                  "type": "select",
                                  "align": "left",
                                  "colName": ""
                                },
                                {
                                  "key": "roll",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Lancer les dés !",
                                  "visibilityFormula": "",
                                  "label": null,
                                  "defaultValue": null,
                                  "size": "full-size",
                                  "icon": "dice-d10",
                                  "value": "",
                                  "prefix": "",
                                  "suffix": "",
                                  "rollMessage": "<!-- Roll for carrier/hobby -->\n\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n<!-- caractéristique -->\n${#caracteristiqueName:= sameRow('characteristic', false)}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- seuil et bonus si seuil > 10 -->\n${#seuil:= 10 - sameRow('level') - diff}$        \n${#bonus:=((seuil + caracteristique + sante) > 10 ? seuil + caracteristique + sante - 10 : 0)}$\n\n<!-- jet et affichage -->\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ de <strong>${!sameRow('name')}$</strong>${!0 != caracteristique ? concat(' avec ', caracteristiqueName) : \"\"}$</h3>\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', sameRowRef('characteristic'), 0)}$",
                                  "altRollMessage": "",
                                  "style": "label",
                                  "type": "label",
                                  "align": "left",
                                  "colName": ""
                                }
                              ],
                              "head": true,
                              "deleteWarning": true,
                              "predefinedLines": [
                                {
                                  "deleted": true
                                }
                              ],
                              "canPlayerAdd": true,
                              "type": "dynamicTable"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique utilisée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "unskilledRoll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet en tant que non qualifié",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for unskilled carrier/hobby -->\n${#concat(\n  ?{diff:\"Difficulté\"|2,\"Normal\"|0,\"Facile\"|4,\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledCharacteristic), 0)}$\n${#seuil:= 10 - 6 - diff}$        \n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet ${!(0 == diff ? \"facile\" : (2 == diff ? \"normal\":\"difficile\"))}$ <strong>Non qualifié</strong>${!0 != caracteristique ? concat(' avec ', unskilledCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Personnage",
                  "type": "tab"
                },
                {
                  "key": "stuffTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Equipement",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "title",
                              "type": "label"
                            },
                            {
                              "key": "stuff",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": null,
                              "style": "dialog",
                              "type": "textArea"
                            }
                          ],
                          "flow": "vertical",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "objects",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "rowLayout": [],
                          "head": false,
                          "deleteWarning": true,
                          "title": "<strong>Objets</strong>",
                          "hideEmpty": true,
                          "headDisplay": false,
                          "showDelete": true,
                          "statusIcon": false,
                          "nameAlign": "left",
                          "nameLabel": "Nom",
                          "templateFilter": [
                            "V67YO7hbO1tfTZdx"
                          ],
                          "itemFilter": [],
                          "type": "itemContainer"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "left",
                      "type": "panel"
                    }
                  ],
                  "name": "Equipement",
                  "type": "tab"
                },
                {
                  "key": "fightTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "characteristicForInitiative",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Choisir la caractéristique pour l'initiative",
                          "visibilityFormula": "",
                          "label": "Initiative",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "fightness",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Combativité",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "-3",
                          "maxVal": "3",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${initiative}$",
                          "prefix": "Modification de l'initiative : ",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "fightnessPowerCheckbox",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pouvoir de Combativité",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        }
                      ],
                      "flow": "grid-3",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "weapons",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "Placer les armes ici",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "type",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.combatType, \"1\", \"Corps-à-corps\", \"2\", \"Contact\", \"3\", \"Distance\", \"<i>Non défini</i>\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Type"
                        },
                        {
                          "key": "powerfull",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Puissance",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.powerfullMax, \"1\", \"Faible\", \"2\", \"Moyenne\", \"3\", \"Importante\", \"4\", \"Remarquable\", item.powerfullMax)}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Puissance"
                        },
                        {
                          "key": "bonus",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.attackBonus}$ / ${item.damageBonus}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Bonus attaque/dégâts"
                        },
                        {
                          "key": "attack",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Faire un jet d'attaque",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Roll for attack -->\n${#concat(\n  ?{diff:\"Difficulté\"|\"2\",\"Normal\"|\"0\",\"Facile\"|\"4\",\"Difficile\"},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:= fetchFromActor(\"target\", \"name\", \"\")}$\n${#(nameTarget?\"\":notify(\"error\", \"Vous devez sélectionner une cible !\"))}$\n\n<!-- récupération des données -->\n${#sante:=       healthMalus}$\n${#combativite:= fightnessForAttack}$\n${#type:=        item.combatType}$\n${#bonusArme:=   item.attackBonus ? item.attackBonus : 0}$\n\n<!-- définition des valeurs par défaut -->\n${#ccCombatCarrier:=       ccCombatCarrier       ? ccCombatCarrier       : \"\"}$\n${#ccCombatHobby:=         ccCombatHobby         ? ccCombatHobby         : \"\"}$\n${#contactCombatCarrier:=  contactCombatCarrier  ? contactCombatCarrier  : \"\"}$\n${#contactCombatHobby:=    contactCombatHobby    ? contactCombatHobby    : \"\"}$\n${#distanceCombatCarrier:= distanceCombatCarrier ? distanceCombatCarrier : \"\"}$\n${#distanceCombatHobby:=   distanceCombatHobby   ? distanceCombatHobby   : \"\"}$\n\n${#default:= 6}$\n${#ccCombatCarrierLevel:=       first(fetchFromDynamicTable('carriers', 'level', 'name', ccCombatCarrier),       default)}$\n${#ccCombatHobbyLevel:=         first(fetchFromDynamicTable('hobbies',  'level', 'name', ccCombatHobby),         default)}$\n${#contactCombatCarrierLevel:=  first(fetchFromDynamicTable('carriers', 'level', 'name', contactCombatCarrier),  default)}$\n${#contactCombatHobbyLevel:=    first(fetchFromDynamicTable('hobbies',  'level', 'name', contactCombatHobby),    default)}$\n${#distanceCombatCarrierLevel:= first(fetchFromDynamicTable('carriers', 'level', 'name', distanceCombatCarrier), default)}$\n${#distanceCombatHobbyLevel:=   first(fetchFromDynamicTable('hobbies',  'level', 'name', distanceCombatHobby),   default)}$\n\n<!-- définition du nom du métier ou du hobby de référence -->\n${#ccName:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobby       : ccCombatCarrier}$\n${#contactName:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobby  : contactCombatCarrier}$\n${#distanceName:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobby : distanceCombatCarrier}$\n${#carrierHobby:= switchCase(type, \"1\", ccName, \"2\", contactName, \"3\", distanceName, \"\")}$\n${#carrierHobby:= equalText(\"\", carrierHobby) ? \"Non qualifié\" : carrierHobby}$\n\n<!-- définition du niveau du métier ou du hobby de référence -->\n${#ccLevel:=       ccCombatCarrierLevel       >= ccCombatHobbyLevel       ? ccCombatHobbyLevel       : ccCombatCarrierLevel}$\n${#contactLevel:=  contactCombatCarrierLevel  >= contactCombatHobbyLevel  ? contactCombatHobbyLevel  : contactCombatCarrierLevel}$\n${#distanceLevel:= distanceCombatCarrierLevel >= distanceCombatHobbyLevel ? distanceCombatHobbyLevel : distanceCombatCarrierLevel}$\n${#level:=switchCase(type, \"1\", ccLevel, \"2\", contactLevel, \"3\", distanceLevel, default)}$\n\n<!-- définition de la caractéristique de référence -->\n${#caracteristiqueName:= (1 == type ? ccCombatCharacteristic : 2 == type ? contactCombatCharacteristic : 3 == type ? distanceCombatCharacteristic : \"\")}$\n${#caracteristique:=     first(fetchFromDynamicTable('characteristics', 'value', 'name', caracteristiqueName), 0)}$\n\n<!-- combativité de la cible -->\n${#combativiteAdverse:= fetchFromActor('target', 'fightnessForDefense', 0)}$\n\n<!-- calcul du seuil de réussite -->\n${#seuil:= 10 - level - diff}$\n\n<!-- calcul du bonus si le seuil est supérieur à 10 -->\n${#seuilTemp:= seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n${#bonus:=(seuilTemp > 10 ? seuilTemp - 10 : 0)}$\n\n<h3><strong>${!item.name}$</strong> : attaque ${!(0 == diff ? \"facile\" : (2 == diff ? \"normale\":\"difficile\"))}$ [${! carrierHobby}$${! 0 != caracteristique ? concat(\" / \", caracteristiqueName) : \"\"}$]</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:=seuil + caracteristique + combativite + combativiteAdverse + bonusArme + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Jet d'attaque"
                        },
                        {
                          "key": "damage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer les dommages",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "star-exclamation",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- Jet pour calculer les dégâts des armes aux corps-à-corps, contact et distance -->\n${#concat(\n  ?{powerfull:\"Puissance\"|1,concat(\"Faible\",(1==item.powerfullMax?\" (max)\":\"\"))|2,concat(\"Moyenne\",(2==item.powerfullMax?\" (max)\":\"\"))|3,concat(\"Importante\",(3==item.powerfullMax?\" (max)\":\"\"))|4,concat(\"Remarquable\",(4==item.powerfullMax?\" (max)\":\"\"))},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n<!-- vérification qu'une cible a bien été sélectionnée -->\n${#nameTarget:=       \u001c\u001c\u001c\u001c fetchFromActor(\"target\", \"name\", \"\")}$\n${#nameTarget ? \"\" : notify(\"error\", \"Vous devez sélectionner une cible !\")}$\n\n<!-- récupération des données -->\n${#combativite:=       fightnessForAttack}$\n${#type:=              item.combatType}$\n${#bonusArme:=         item.damageBonus ? item.damageBonus : 0}$\n${#protectionAdverse:= -1 * (3 == type ? fetchFromActor(\"target\", \"distanceArmorEquiped\", 0) : fetchFromActor(\"target\", \"ccArmorEquiped\", 0))}$\n\n<!-- bonus de la caracteristique si combat corps-à-corps ou contact -->\n${#bonusForce:=        3 == type ? 0 : first(fetchFromDynamicTable('characteristics', 'value', 'name', powerfullCharacteristic), 0)}$\n\n<!-- malus de la résistance de la cible -->\n${#resistanceAdverse:= -1 * fetchFromActor(\"target\", \"resistanceModificator\", 0)}$\n\n<!-- combativité de la cible -->\n${combativiteAdverse:= fetchFromActor(\"target\", \"fightnessForDefense\", 0)}$\n\n<h3>Dégats de puissance ${!switchCase(powerfull, \"1\", \"Faible\",\"2\", \"Moyenne\",\"3\", \"Importante\", \"4\", \"Remarquable\", \"<i>non définie</i>\")}$ sur <strong>@{target|name}</strong> par ${!name}$</h3>\n\n<!-- vérification de la puissance utilisée -->\n${!(powerfull > item.powerfullMax\n  ? \"<div style=\\\"padding: 2px; text-align: center; color: var(--color-level-warning); border: solid 1px var(--color-level-warning)\\\">La <strong>puissance choisie</strong> doit être <strong>inférieure ou</strong> égale à la <strong>puissance maximale</strong> de l'attaque</div>\"\n  :\"\"\n)}$\n\n<!--\ncode blessures :\n*  0 = Rien\n* 10 = Légèrement sonné\n* 20 = Sonné\n* 30 = Assommé\n* 40 = Dommage critique\n* 50 = Egratignure\n* 60 = Blessure légère\n* 70 = Blessure grave\n* 80 = Coma\n* 90 = Mort\n-->\n\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <i class=\"fas fa-dice-d10\"></i>\n        <span>${!roll:= [1d10]}$</span>\n      </td>\n    </tr>\n    <tr>\n      <td><h4>Dégâts</h4></td>\n      <td>\n        <strong>${roll:= roll + combativite + bonusForce + combativiteAdverse + resistanceAdverse + protectionAdverse + bonusArme + modificateur}$</strong>\n      </td>\n    </tr>\n${#damage:=switchCase(type, \"1\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 10 : 20)), \"2\", (3 >= roll ? 10 : (7 >= roll ? 20 : 30)), \"3\", (3 >= roll ? 20 : (7 >= roll ? 30 : 40))), \"2\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 50 : 60)), \"2\", (3 >= roll ? 50 : (7 >= roll ? 60 : 70)), \"3\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"4\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))), \"3\", switchCase(powerfull, \"1\", (3 >= roll ? 0:(7 >= roll ? 60 : 70)), \"2\", (3 >= roll ? 60 : (7 >= roll ? 70 : 80)), \"3\", (3 >= roll ? 70 : (7 >= roll ? 80 : 90))))}$\n\n${#damageName:=switchCase(damage, 0, \"Rien\", 10, \"Légèrement sonné\", 20, \"Sonné\", 30, \"Assommé\", 40, \"Dommage critique\", 50, \"Egratignure\", 60, \"Blessure légère\", 70, \"Blessure grave\", 80, \"Coma\", 90, \"Mort\")}$\n\n${#damageDetail:=switchCase(damage, 0, \"Loupé !\", 10, \"Le personnage subit un <strong>malus de 2 points</strong> à toutes ses chances de réussite <strong>au cours du tour suivant</strong> et uniquement celui-ci.\", 20, \"Le personnage subit <strong>un malus de 2 points</strong> à toutes ses chances de réussite jusqu'à ce qu'il puisse récupérer en se reposant environ cinq minutes. <br/>S'il est sonné une seconde fois avant de s'être reposé, il est considéré comme Assommé.\", 30, \"Le personnage s'évanouit <strong>pour ${[1d10]}$ minutes</strong> s'il est convenablement soigné.</strong> <br/>Sans aucune aide extérieure l'évanouissement sera <strong>cinq fois plus long</strong>.\", 40, \"Le personnage est <strong>Assommé</strong>  pour <strong>${[1d10]}$ minutes</strong> et subit une <strong>Blessure Légère</strong>.\", 50, \"L'attaque n'a qu'un effet sanguinolent sans aucune conséquence grave. Le sang coule, mais un bon pansement devrait pouvoir l'arrêter et éviter que la cicatrice ne soit trop visible.\", 60, \"Le personnage est meurtri dans sa chair mais sans que cela ait des conséquences vraiment fâcheuses. La douleur cause un <strong>malus de 1 point</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement quelques jours). <br/>Une seconde blessure légère reçue moins d'une heure après la première cause une blessure grave (après une heure, la blessure reste légère).\", 70, \"Le personnage est blessé à un endroit grave. La douleur et la gêne causées par la blessure donnent un <strong>malus de 2 points</strong> à toutes ses chances de réussite tant que la blessure n'est pas soignée (ce qui prend généralement plusieurs semaines d'hôpital).<br/>Une seconde blessure grave reçue moins d'une heure après la première cause un coma immédiat (après une heure, la blessure reste grave).\", 80, \"Le personnage est aux portes de la mort. Il lutte de toutes ses forces pour rester en vie mais sombre néanmoins dans un profond coma. Il ne pourra être réanimé qu'avec des moyens médicaux importants. <strong>S'il n'est pas secouru avant une heure, il meurt sans jamais reprendre conscience</strong>.<br/>Un second coma moins d'une heure après le premier cause la mort immédiate de la victime (après un heure, la blessure reste un coma).\", 90, \"Le personnage est mortellement touché. Il peut à la rigueur s'en sortir avec des séquelles s'il est soigné rapidement (dans les 5 minutes) et s'il est ensuite suivi médicalement avec des appareils médicaux de haute technologie.\")}$\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; border: solid 1px var(--color-border-dark)\">\n          <strong>${!damageName}$</strong>\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: justify; border: solid 1px var(--color-border-dark)\">\n          ${!damageDetail}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- application des dégâts à la cible \nIF (dommage >= 50 AND dommage >= target.health) THEN\n  AppliquerDommageHealth()\nELSE\n  IF (dommage == 40 AND 60 > target.health) THEN\n    AppliquerDommageCritique()\n  ELSE\n    IF (30 >= dommage AND dommage >= target.stun) THEN\n      AppliquerDommageStun()\n    ELSE\n      // ne rien faire\n    FI\n  FI\nFI\n-->\n\n<!--\n\n${stunTarget:= fetchFromActor('target', 'stun')}$\n<br/>\n${healthTarget:= fetchFromActor('target', 'health')}$\n<br/>\n${#assomme:=30}$\n${#blessureLegere:=60}$\n${setPropertyInEntity('target', 'stun', ref(\"assomme\"))}$\n\n\n\n${$changement:=and(damage >= 50, damage > healthTarget)\n  ? ${setPropertyInEntity('target', 'health', \"damage\")}$\n  : and(40 == damage, 60 > healthTarget)\n    ? ${concat(\n      string(setPropertyInEntity('target', 'stun', \"assomme\")), \n      string(setPropertyInEntity('target', 'health', \"blessureLegere\")))}$\n    : and(30 >= damage, damage > stunTarget)\n      ? ${setPropertyInEntity('target', 'stun', \"damage\")}$\n      : \"pas de changement\"\n)}$\n-->",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Dégats"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armes</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "14jgxwvyYKfEIWkZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "armors",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "ccArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.ccArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection au contact"
                        },
                        {
                          "key": "distanceArmor",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.distanceArmor}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Protection contre les armes à feu"
                        },
                        {
                          "key": "equiped",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${(item.equiped ? \"Oui\" : \"Non\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "${(item.equiped \n  ? \n    ${concat(\"retire \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', \"\")}$\n  :\n    ${concat(\"équipe \", item.name)}$\n    ${#setPropertyInEntity('item', 'equiped', 1)}$\n)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Equipée"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Armures</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "EKpHmIAjQI656vcn"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "carriersHobbiesPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Corps-à-corps",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Contact",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Distance",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "ccCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "contactCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "preferred-panel",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Métier préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCarrier",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "carriers",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Hobby préféré",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatHobby",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "hobbies",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Caractéristique préférée",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "distanceCombatCharacteristic",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "full-size",
                              "options": [],
                              "tableKey": "characteristics",
                              "tableKeyColumn": "name",
                              "tableLabelColumn": "",
                              "formulaKeyOptions": null,
                              "formulaLabelOptions": null,
                              "type": "select"
                            }
                          ],
                          "flow": "grid-2",
                          "align": "left",
                          "type": "panel"
                        }
                      ],
                      "flow": "grid-3",
                      "align": "left",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "powerfullCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la puissance des attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "resistanceCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Pour la résistance face aux attaques (corps-à-corps et contact)",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    }
                  ],
                  "name": "Combat",
                  "type": "tab"
                },
                {
                  "key": "biographyTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "Tout savoir de la vie du personnage",
                  "visibilityFormula": "",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Expérience",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "subtitle",
                          "type": "label"
                        },
                        {
                          "key": "xp",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Expérience du personnage",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "0",
                          "size": "medium",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": true,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        }
                      ],
                      "flow": "grid-2",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "panel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "biographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Biographie",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "biography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie",
                          "type": "tab"
                        },
                        {
                          "key": "privateBiographyPanel",
                          "cssClass": null,
                          "role": "0",
                          "permission": "3",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "contents": [
                                {
                                  "key": "privateBiography",
                                  "cssClass": "",
                                  "role": "0",
                                  "permission": "0",
                                  "tooltip": "Biographie privée",
                                  "visibilityFormula": "",
                                  "label": "",
                                  "defaultValue": "",
                                  "size": null,
                                  "style": "sheet",
                                  "type": "textArea"
                                }
                              ],
                              "flow": "vertical",
                              "align": "left",
                              "type": "panel"
                            }
                          ],
                          "name": "Biographie privée",
                          "type": "tab"
                        }
                      ],
                      "type": "tabbedPanel"
                    }
                  ],
                  "name": "Biographie",
                  "type": "tab"
                },
                {
                  "key": "innatePowersTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(and(1 == type, 0 < emergence), 2 == type) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessDraconicMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie draconique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessDraconicMagic",
                          "contents": [
                            {
                              "key": "draconicMagicLevel",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "Niveau",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "",
                              "allowRelative": false,
                              "showControls": false,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inn&eacute; n&rsquo;est accessible <strong>qu&rsquo;aux dragons et aux &ecirc;tres magiques qui descendent directement des dragons</strong>. Le personnage poss&egrave;de des dons qui lui&nbsp;permettent d&rsquo;apprendre relativement facilement des sorts de magie draconique.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le nombre total de sorts qu&rsquo;il peut apprendre, sans avoir &agrave; suivre la proc&eacute;dure longue et fastidieuse d&eacute;crite dans le chapitre concern&eacute;.&nbsp;</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.&nbsp;</p>\n<p style=\"text-align: justify;\">Il accorde aussi un bonus au lancement des sortil&egrave;ges et permet de contr&ocirc;ler un peu plus pr&eacute;cis&eacute;ment la dur&eacute;e des sorts.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "accessAlchemicalMagic",
                          "cssClass": "",
                          "role": "3",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Accès à la magie alchimique",
                          "defaultValue": null,
                          "size": "full-size",
                          "type": "checkbox",
                          "defaultChecked": false
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "accessAlchemicalMagic",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "m-small",
                              "icon": "",
                              "value": "${alchemicalMagicLevel}$",
                              "prefix": "Niveau ",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "<p style=\"text-align: justify;\">Ce pouvoir inné n’est accessible <strong>qu’aux êtres magiques</strong>. Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "horizontal",
                          "align": "justify",
                          "type": "panel"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "powers",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "level",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.level}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Niveau"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Pouvoirs innées</strong>",
                      "hideEmpty": true,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Nom",
                      "templateFilter": [
                        "TOIxmn68EGfcsuRW"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Pouvoirs innés",
                  "type": "tab"
                },
                {
                  "key": "draconicMagicTav",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(2 == type, and(1 == type, accessDraconicMagic)) ? true : false",
                  "contents": [
                    {
                      "key": "manaPanel",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Récupération : ${recoveryMana}$",
                          "visibilityFormula": "",
                          "contents": [
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "Mana",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            },
                            {
                              "key": "mana",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": "",
                              "defaultValue": "",
                              "size": "m-small",
                              "allowDecimal": false,
                              "minVal": "0",
                              "maxVal": "${maxMana}$",
                              "allowRelative": false,
                              "showControls": true,
                              "controlsStyle": "hover",
                              "type": "numberField"
                            },
                            {
                              "key": "",
                              "cssClass": "",
                              "role": "0",
                              "permission": "0",
                              "tooltip": "",
                              "visibilityFormula": "",
                              "label": null,
                              "defaultValue": null,
                              "size": "full-size",
                              "icon": "",
                              "value": "/${maxMana}$",
                              "prefix": "",
                              "suffix": "",
                              "rollMessage": "",
                              "altRollMessage": "",
                              "style": "label",
                              "type": "label"
                            }
                          ],
                          "flow": "grid-3",
                          "align": "center",
                          "type": "panel"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryMana",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "m-small",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "medium",
                          "icon": "",
                          "value": "Durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        },
                        {
                          "key": "temporaryManaConservation",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "charList": "",
                          "maxLength": "",
                          "type": "textField"
                        }
                      ],
                      "flow": "grid-5",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "Lancer 1d10 pour la durée",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "Jet pour la durée de conservation de la Mana temporaire",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<h3>Durée de conservation de la Mana temporaire</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10]}$ jours ou minutes\n      </td>\n    </tr>\n  </tbody>\n</table>",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "spells",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "art",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.art}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Art"
                        },
                        {
                          "key": "description",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.description}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Description"
                        },
                        {
                          "key": "roll",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic-spell -->\n\n<!-- \nPour le lancement du sort :\n* seuil = dépend du nombre de points de Mana impliqué (dépend du sort ou est variable) => saisie à faire au moment du jet\n* MODIFICATEURS à récupérer de la fiche : \n  * + niveau en magie draconique\n  * + niveau du sort\n-->\n\n${#concat(\n  ?{manaCost:\"Mana dépensée\"|\"1 à 5\"|\"6 à 10\"|\"11 à 15\"|\"16 à 20\"|\"21 à 24\"|\"25 et plus\"}\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#sante:=healthMalus}$\n\n${#seuil:= switchCase(manaCost, \"1 à 5\", 5, \"6 à 10\", 4, \"11 à 15\", 3, \"16 à 20\", 2, \"21 à 24\", 1, 0)}$\n\n${#magieDraconique:= draconicMagicLevel}$\n\n${#niveauSort:= item.level}$\n\n${#bonus:=((seuil + magieDraconique + niveauSort + modificateur + sante) > 10 ? seuil + magieDraconique + niveauSort + modificateur + sante - 10 : 0)}$\n\n<h3>Lancement du sort <strong>${!item.name}$</strong></h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieDraconique + niveauSort + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Lancer le sort"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Sorts draconiques</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Sort",
                      "templateFilter": [
                        "pUbJMnHnfGOeDy85"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        }
                      ],
                      "flow": "vertical",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "unskilledMaskCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Caractéristique la plus appropriée",
                          "defaultValue": "",
                          "size": "full-size",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Jet de masque sans métier ni hobby",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll-draconicMagic -->\n\n${#concat(\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 4}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', unskilledMaskCharacteristic), 0)}$\n\n${#sante:=healthMalus}$\n\n${#bonus:=((seuil + caracteristique + modificateur + sante) > 10 ? seuil + caracteristique + modificateur + sante - 10 : 0)}$\n\n<h3>Jet de masque sans métier/hobby qualifié${!0 != caracteristique ? concat(\" avec \", unskilledMaskCharacteristic) : \"\"}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td><h4>Jet du dé</h4></td>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'unskilledMaskCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Liste des masques créés",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "masks",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": null,
                          "style": "dialog",
                          "type": "textArea"
                        }
                      ],
                      "flow": "vertical",
                      "align": "justify",
                      "type": "panel"
                    }
                  ],
                  "name": "Magie draconique",
                  "type": "tab"
                },
                {
                  "key": "alchemicalMagicTab",
                  "cssClass": null,
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "or(3 == type, accessAlchemicalMagic) ? true : false",
                  "contents": [
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "accessDraconicMagic",
                      "contents": [
                        {
                          "key": "alchemicalMagicLevel",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "Niveau",
                          "defaultValue": "",
                          "size": "m-small",
                          "allowDecimal": false,
                          "minVal": "0",
                          "maxVal": "",
                          "allowRelative": false,
                          "showControls": false,
                          "controlsStyle": "hover",
                          "type": "numberField"
                        },
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "<p style=\"text-align: justify;\">Le personnage possède des dons qui lui permettent d’apprendre relativement facilement des sorts alchimiques.</p>\n<p style=\"text-align: justify;\">Le niveau dans ce pouvoir indique le bonus au jet de dosage que reçoit intrinsèquement le personnage et ce quelle que soit la formule préparée.</p>\n<p style=\"text-align: justify;\">Ce pouvoir est permanent.</p>",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "justify",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "contents": [
                        {
                          "key": "",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "Caractéristique pour le dosage",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "bold",
                          "type": "label"
                        },
                        {
                          "key": "dosageCharacteristic",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": "",
                          "defaultValue": "",
                          "size": "medium",
                          "options": [],
                          "tableKey": "characteristics",
                          "tableKeyColumn": "name",
                          "tableLabelColumn": "",
                          "formulaKeyOptions": null,
                          "formulaLabelOptions": null,
                          "type": "select"
                        }
                      ],
                      "flow": "horizontal",
                      "align": "center",
                      "type": "panel"
                    },
                    {
                      "key": "",
                      "cssClass": "",
                      "role": "0",
                      "permission": "0",
                      "tooltip": "",
                      "visibilityFormula": "",
                      "rowLayout": [
                        {
                          "key": "centuryOfWriting",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.centuryOfWriting}$<sup>ème</sup> s.",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Ancienneté"
                        },
                        {
                          "key": "maxPower",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${item.maxPower}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "center",
                          "colName": "Puissance maximale"
                        },
                        {
                          "key": "vector",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "",
                          "value": "${switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\")}$",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Vecteur"
                        },
                        {
                          "key": "dosage",
                          "cssClass": "",
                          "role": "0",
                          "permission": "0",
                          "tooltip": "",
                          "visibilityFormula": "",
                          "label": null,
                          "defaultValue": null,
                          "size": "full-size",
                          "icon": "dice-d10",
                          "value": "",
                          "prefix": "",
                          "suffix": "",
                          "rollMessage": "<!-- roll for dosage -->\n\n${#concat(\n  ?{puissance:\"Puissance\"[number]|item.maxPower},\n  ?{modificateur:\"Modificateur\"[number]|0}\n)}$\n\n${#seuil:= 8}$\n${#magieAlchimique:= alchemicalMagicLevel}$\n\n${#caracteristique:= first(fetchFromDynamicTable('characteristics', 'value', 'name', dosageCharacteristic), 0)}$\n${#sante:= healthMalus}$\n\n${#anciennete:= item.centuryModificator}$\n\n${#vecteur:= switchCase(item.vector, \"0\", \"Solide\", \"10\", \"Liquide\", \"20\", \"Gazeux\", \"Vecteur non renseigné\")}$\n\n${#bonus:=((seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante) > 10 ? seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante - 10 : 0)}$\n\n<!-- contrôle de la puissance (inférieure ou égale à la puissance maximale) -->\n${#puissance:= min(item.maxPower, max(puissance, 0))}$\n\n<h3>Dosage de la formule <strong>${!item.name}$</strong>${!0 != caracteristique ? concat(\" avec \", dosageCharacteristic) : \"\"}$ (puissance ${!puissance}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>Jet du dé</th>\n      <td>\n        <strong>${roll:= [1d10] + bonus}$</strong> / ${seuil:= seuil + magieAlchimique + anciennete + caracteristique + modificateur + sante}$\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p style=\"padding: 2px; text-align: center; font-weight: bold; ${!roll<=seuil ? \"color: var(--color-level-success); border: solid 1px var(--color-level-success)\\\">Réussite\" : \"color: var(--color-level-error); border: solid 1px var(--color-level-error)\\\">Echec\"}$</p>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p>\n<!-- réussite : durée d'expiration du sort contenu dans le vecteur -->\n${!seuil >= roll ? (0 == item.vector ? \"Le sort n'expirera qu'à la destruction du vecteur\" : 10 == item.vector ? concat(\"Le sort dans le vecteur liquide expirera au bout de \",string(${![1d10]}$),\" jour(s)\") : 20 == item.vector ? concat(\"Le sort dans le vecteur gazeux expirera au bout de \",string(${![1d10]}$),\" heure(s)\") : \"\") : \"\"}$\n\n<!-- échec -->\n${#rollEffect:= [1d10]}$\n\n${!(roll > seuil ? switchCase(rollEffect, 1, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 2, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 3, concat(\"Le sort prend effet normalement \", string(${![1d10]}$),\" heures plus tard\"), 4, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 5, \"Le sort rate totalement mais les ingrédients peuvent être réutilisés\", 6, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 7, concat(\"Un ou plusieurs ingrédients ont été oubliés : <strong>\", replace([#Alchimie-Ingrédients-table 1], \", \", \" : \") ,\"</strong><br>Le travail sera suspendu jusqu'à ce qu'ils soient rajoutés.<br>Un nouveau jet de dosage sera alors réalisé.\"), 8, ((puissance - 2) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 2)) : \"Le sort rate et les ingrédients sont perdus\"), 9, ((puissance - 4) > 0 ? concat(\"Le sort prend effet avec une puissance réduite : \", string(puissance - 4)) : \"Le sort rate et les ingrédients sont perdus\"), \"Le sort rate totalement et les ingrédients sont perdus\")\n  : \"\"\n)}$\n        </p>\n      </td>\n    </tr>\n  </tbody>\n</table>\n\n<!-- remise à zéro de la caractéristique utilisée -->\n${#setPropertyInEntity('self', 'dosageCharacteristic', 0)}$",
                          "altRollMessage": "",
                          "style": "label",
                          "type": "label",
                          "align": "left",
                          "colName": "Dosage"
                        }
                      ],
                      "head": true,
                      "deleteWarning": true,
                      "title": "<strong>Formules d'alchimie</strong>",
                      "hideEmpty": false,
                      "headDisplay": true,
                      "showDelete": true,
                      "statusIcon": false,
                      "nameAlign": "left",
                      "nameLabel": "Formule",
                      "templateFilter": [
                        "kM4XQrctsu3ZixOZ"
                      ],
                      "itemFilter": [],
                      "type": "itemContainer"
                    }
                  ],
                  "name": "Magie alchimique",
                  "type": "tab"
                }
              ],
              "type": "tabbedPanel"
            }
          ],
          "key": "custom_body",
          "cssClass": null,
          "role": 0,
          "permission": 0,
          "tooltip": null,
          "visibilityFormula": null,
          "flow": null,
          "align": null,
          "type": "panel"
        },
        "display": {
          "width": "800",
          "height": "650",
          "fix_size": false,
          "pp_width": "128",
          "pp_height": "128"
        },
        "attributeBar": {},
        "activeEffects": {},
        "activeConditionalModifierGroups": [],
        "template": "KGZvMOZa6bJPhlh0",
        "props": {
          "name": "Vernon Reid",
          "type": "0",
          "emergence": "0",
          "generation": "1",
          "age": "25",
          "stun": "0",
          "health": "0",
          "fightness": "0",
          "xp": "0",
          "healthMalusLabel": "Impact de l'état de santé :",
          "unskilledRoll": "Jet en tant que non qualifié",
          "healthMalus": "0",
          "stunStatus": "Tout va bien",
          "healthStatus": "Tout va bien",
          "ccArmorEquiped": "0",
          "distanceArmorEquiped": "0",
          "maxMana": "5",
          "recoveryMana": "1 par heure",
          "gender": "",
          "nationality": "",
          "unskilledCharacteristic": "",
          "characteristicForInitiative": "",
          "fightnessPowerCheckbox": false,
          "ccCombatCarrier": "",
          "ccCombatHobby": "",
          "ccCombatCharacteristic": "",
          "contactCombatCarrier": "",
          "contactCombatHobby": "",
          "contactCombatCharacteristic": "",
          "distanceCombatCarrier": "",
          "distanceCombatHobby": "",
          "distanceCombatCharacteristic": "",
          "powerfullCharacteristic": "",
          "resistanceCharacteristic": ""
        },
        "templateSystemUniqueVersion": 1929778308
      },
      "prototypeToken": {
        "name": "Vernon Reid",
        "displayName": 40,
        "actorLink": false,
        "appendNumber": false,
        "prependAdjective": false,
        "texture": {
          "src": "icons/svg/mystery-man.svg",
          "scaleX": 1,
          "scaleY": 1,
          "offsetX": 0,
          "offsetY": 0,
          "rotation": 0
        },
        "width": 1,
        "height": 1,
        "lockRotation": false,
        "rotation": 0,
        "alpha": 1,
        "disposition": -1,
        "displayBars": 0,
        "bar1": {
          "attribute": null
        },
        "bar2": {
          "attribute": null
        },
        "light": {
          "alpha": 0.5,
          "angle": 360,
          "bright": 0,
          "coloration": 1,
          "dim": 0,
          "attenuation": 0.5,
          "luminosity": 0.5,
          "saturation": 0,
          "contrast": 0,
          "shadows": 0,
          "animation": {
            "type": null,
            "speed": 5,
            "intensity": 5,
            "reverse": false
          },
          "darkness": {
            "min": 0,
            "max": 1
          }
        },
        "sight": {
          "enabled": true,
          "range": 0,
          "angle": 360,
          "visionMode": "basic",
          "color": null,
          "attenuation": 0.1,
          "brightness": 0,
          "saturation": 0,
          "contrast": 0
        },
        "detectionModes": [],
        "flags": {},
        "randomImg": false
      },
      "items": [],
      "effects": [],
      "sort": 200000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {
        "custom-system-builder": {
          "version": "3.0.0"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708696888804,
        "modifiedTime": 1708697295490,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    }
  ],
  "combats": [],
  "items": [],
  "journal": [
    {
      "folder": "TNrPefJgEJW5sy92",
      "name": "A2 SNIPE - Scénario",
      "_id": "JycUmAVpOKquA0wc",
      "pages": [
        {
          "sort": 100000,
          "name": "Avertissement",
          "type": "text",
          "_id": "SdcyUCObdPJqZNnP",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Ce scénario contient une forte dose d’enquête et de diplomatie. </p><p style=\"text-align:justify\">Les joueurs vont être confrontés à un complot où trempent des organisations puissantes ou violentes, voire les deux. </p><p style=\"text-align:justify\">Rivaliser avec elles sur le terrain de la violence n’amènerait qu’une réponse du même type, mais deux fois plus forte. En clair, si les joueurs brandissent un lance-roquettes, ceux d’en face auront un tank ou dix lance-roquettes. C’est au meneur de jeu de leur faire comprendre qu’aussi puissant qu’un dragon et son gestalt puissent être, ils ne sont rien face à des organisations étatiques ou à une bande armée fanatisée bénéficiant d’appuis dans la population. </p><p style=\"text-align:justify\">Seule l’intelligence peut contrecarrer leurs projets.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708538286234,
            "modifiedTime": 1708538339808,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 200000,
          "name": "Introduction",
          "type": "text",
          "_id": "CmOnjEOFrZMSAR1y",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Depuis que la politique existe, le moyen le plus sûr d’éliminer un adversaire c’est encore de le tuer. Mais encore faut-il le faire de façon à ne pas être découvert. Et comme il faut toujours un coupable, la méthode la plus adaptée dans ces cas-là est de faire reposer la faute sur un bouc émissaire que la population sera toute prête à accepter. </p><p style=\"text-align:justify\">C’est une fois de plus ce qui risque d’arriver si les joueurs échouent dans ce scénario, puisqu’ils vont être plongés au coeur d’une machination savamment orchestrée par la CIA pour faire assassiner un futur candidat à la maison blanche.</p><p style=\"text-align:justify\">Cet assassinat, provoqué par une désinformation de la CIA et perpétré par un groupuscule afro-américain complètement manipulé, implique des dragons à différents niveaux dans chaque camp. Un dragon blanc raciste au sein de la CIA, un dragon vert rebelle anti-nazi chez les afro-américains et un dragon doré conseiller du futur candidat à la présidence. La seule personne à pouvoir éviter le drame est un être magique, que tout le monde cherche à avoir pour différentes raisons et que les joueurs vont devoir s’efforcer de trouver pendant la majeure partie du scénario.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708538346569,
            "modifiedTime": 1708538483974,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 300000,
          "name": "Disorder",
          "type": "text",
          "_id": "H18aROe72eDYUfZK",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">A l’origine de tous les événements qui vont suivre se trouve un dragon blanc, chef du service infiltration de la CIA, du nom de @UUID[JournalEntry.lQJaWRvD69fhnuEu]{Dereck Sterling}. Ce dragon a pour charge, au sein de la CIA, de s’occuper de la surveillance et de la mise hors service des groupuscules terroristes agissant sur le territoire américain. Parallèlement à son travail, Sterling est également un membre actif d’une organisation fasciste regroupant des hauts fonctionnaires et de riches industriels qui veulent conserver \"une Amérique propre et bien pensante\".</p><p style=\"text-align:justify\">Cette organisation, qui s’est donnée pour nom \"United Forces\", voit d’un très mauvais oeil la montée en flèche dans les sondages d’un jeune candidat à la présidence car celui-ci n’est pas \"politically correct\" selon leurs critères.</p><p style=\"text-align:justify\">@UUID[JournalEntry.Ys5AovKBMDos0Hn6]{Jason Prescott}, alias J.P pour toute l’Amérique, a tout pour plaire aux électeurs : jeune, beau, brillant et heureux en mariage, il perpétue l’imagerie d’une réussite à l’américaine. C’est un nouvel avatar du syndrome Kennedy… d’ailleurs, il a presque les mêmes idées politiques, surtout au niveau social.</p><p style=\"text-align:justify\">\"United Forces\" a donc décidé de confier à Sterling le soin de débarrasser l’horizon politique de ce point noir dans son projet de société. Sterling n’est pas un imbécile et il ne tient pas à être mouillé de trop près dans cette affaire. Pour lui, l’idéal est que \"ceux de l’autre camp\" portent le chapeau de cette élimination. En enquêtant plus à fond, il a appris que le conseiller privilégié de J.P n’est autre qu’un dragon doré. Il fallait s’en douter si on connaît un tant soit peu les axes politiques que prône Ancyte. Ce qui n’est pas pour arranger les affaires de Sterling, qui ne veut pas d’un affrontement frontal avec Ancyte en détruisant les visées politiques du grand-père doré.</p><p style=\"text-align:justify\">Par ailleurs, Sterling se traîne une gamelle dans son travail depuis un certain temps et ça l’agace.</p><p style=\"text-align:justify\">Cette gamelle a pour nom @UUID[.RGvqZgeZdWFb1VdF]{B.O.L.D} (ou <em>Black Organisation for Liberation and Democracy</em>) et ne cesse d’agir contre les organisations fascistes, néo-nazies et le KKK. Ce groupuscule de terroristes noirs, qui pour l’instant n’a encore tué personne, inquiète beaucoup la CIA. Et c’est là que Sterling prouve qu’il n’est pas un imbécile (ou presque) puisqu’il se dit qu’il peut très bien faire d’une pierre deux coups, en faisant éliminer J.P par le B.O.L.D.</p><p style=\"text-align:justify\">Comment ? Et bien en faisant croire au B.O.L.D que Jason Prescott est en fait un agent fasciste camouflé qui brigue le poste de président pour ensuite faire passer des lois ségrégationnistes dures.</p><p style=\"text-align:justify\">Il suffit pour cela de truquer quelques documents, de les faire parvenir au B.O.L.D par l’intermédiaire d’un infiltré. Puis, une fois que les membres de B.O.L.D ont éliminé J.P, on les supprime à leur tour ainsi que l’infiltré et les fausses preuves.</p><p style=\"text-align:justify\">Simple et de bon goût, on évite de cette façon de remonter à la source du complot et Sterling est chaudement félicité par ses amis et par la CIA pour avoir éradiqué la mauvaise herbe de la mère patrie.</p><p style=\"text-align:justify\">Enfin, c’est la théorie. La mise en pratique va s’avérer plus difficile.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708538493139,
            "modifiedTime": 1708539645051,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 400000,
          "name": "B.O.L.D’s in the house",
          "type": "text",
          "_id": "RGvqZgeZdWFb1VdF",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Le B.O.L.D est un groupe de militants de la cause noire qui ont un peu dérapé dans la violence.</p><p style=\"text-align:justify\">Ce groupe, d’une douzaine de membres, est commandé par un dragon vert très charismatique du nom de @UUID[JournalEntry.0zwZA901D66WDqsM]{Lewis Johnson}. Ce jeune dragon vert d’une vingtaine d’années, rebelle à son grand-père, est très proche des idées et des méthodes de son cousin James Earl Coburn. Il est à l’origine du B.O.L.D et deux des membres font partie de son gestalt. Très \"humain\", il hait le racisme et a décidé de le combattre par tous les moyens. Idéaliste et borné, il se prend pour un nouveau Malcom X, même si ses discours ressemblent plus à des slogans tirés du rap que l’on entend d’un bout à l’autre du ghetto.</p><p style=\"text-align:justify\">Il renie ses origines draconiques. Il n’utilise ses pouvoirs qu’en dernière extrémité. Aux griffes et aux dents, il préfère le staccato des UZI et du M16. Il agit surtout en Californie et plus particulièrement à Los Angeles, où il est né et où ses idées ont le plus d’écho dans la communauté noire.</p><p style=\"text-align:justify\">Il est d’ailleurs lié à un crack-gang du south central Los Angeles. C’est ce crack-gang qui fournit armes, argent et planques au groupuscule.</p><p style=\"text-align:justify\">Lewis ou plutôt \"F.F.\", car c’est son nom de guerre qui signifie selon les jours \"Freedom Fighter\" ou \"Fascist Fucker\", jouit d’une certaine notoriété au sein du ghetto et les plus virulents de la cause noire sont prêts à lui apporter aide et protection.</p><p style=\"text-align:justify\">A Los Angeles, Lewis joue sur son terrain.</p>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539485488,
            "modifiedTime": 1708541041632,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 500000,
          "name": "Mistaken identity",
          "type": "text",
          "_id": "6xAj9T8pb8O9ofj7",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Sterling n’a pas réfléchi trop longtemps pour choisir celui qui allait tenir le rôle de la chèvre dans son traquenard. Il a justement sous ses ordres une jeune recrue zélée, de la \"mauvaise couleur\" à son goût, qui fera parfaitement l’affaire.</p><p style=\"text-align:justify\">@UUID[JournalEntry.xIkLVLNyNDzXZBHO]{Vernon Reid}, souffre-douleur de tout le service, a été plus qu’enchanté par la mission de confiance que lui a confiée Sterling : infiltrer à lui seul une bande de dangereux terroristes communistes, quelle aubaine ! Il allait enfin pouvoir faire ses preuves. En plus, il ne doit répondre que des ordres de son supérieur et ne se référer qu’à lui. En clair, Vernon nage dans le bonheur.</p><p style=\"text-align:justify\">Vernon n’a, paradoxalement, pas eu beaucoup d’efforts à faire pour gagner la confiance des gens du B.O.L.D. Ils ont été comme attires par lui… ou plutôt, c’est lui qui a été attiré par eux. Lewis, qui a compris que Vernon était un être magique appartenant à son gestalt, se met un jour à parler de choses bizarres à Vernon. C’était un discours incohérent pour Vernon, où il était question d’êtres magiques et de dragons. Et selon Lewis, Vernon serait un être magique. En fait, Vernon est un Baka. Vernon n’a rien compris, mais il a fait mention de cet entretien dans un de ses rapports à Sterling. Celui-ci comprend tout et se met à jubiler.</p><blockquote><p>Chic alors, se dit-il, c’est un dragon vert qui va porter le chapeau aux yeux des dragons dorés.</p></blockquote><p style=\"text-align:justify\">Mais Sterling sait désormais qu’il doit agir vite, c’est-à-dire avant que Vernon ne devienne un membre à part entière du gestalt de Lewis. Il donne donc une enveloppe à Vernon, en lui  disant que celle-ci contient des éléments qui conduiront le groupuscule jusqu’à une fausse planque de drogue et que là, la CIA fera tomber le groupuscule pour trafic de stupéfiants. Vernon n’aura qu’à dire qu’il a trouvé cette enveloppe dans la voiture d’un type et que l’homme semblait y tenir. Sterling a précisé à Vernon qu’il ne devait pas ouvrir l’enveloppe ni connaître son contenu, afin que les gens du B.O.L.D ne se méfient pas.</p><p style=\"text-align:justify\">En fait, c’est tout bêtement pour que Vernon ne sache pas que c’est un coup monté contre J.P et non une question de drogue. Vernon, en bon petit soldat, a exécuté les ordres à la lettre et a confié l’enveloppe à Lewis. Même s’il est sûr que Lewis dit la vérité sur sa véritable identité, le sens du devoir l’emporte sur toute chose. Lewis semblait visiblement perplexe face aux documents qu’il venait de consulter. Vernon les consulta à son tour et ce qu’il a lu l’a rempli d’horreur. Il a d’abord cru à une erreur de son service et pour en être sûr, il a appelé Sterling, non sans dérober au passage les documents. Sterling lui a dit qu’il allait tout arranger et a demandé à Vernon de ne pas bouger.</p><p style=\"text-align:justify\">Sterling a évidemment envoyé deux tueurs pour toute réponse aux interrogations de Vernon. Vernon a juste eu le temps d’échapper aux tueurs et a enfin réalisé son erreur. Il avait été manipulé tout comme le B.O.L.D. Maintenant la CIA et le B.O.L.D devaient vouloir sa peau. Il était bel et bien grillé.</p><p style=\"text-align:justify\">Vernon a alors pris ses cliques et ses claques, direction le quatrième pouvoir. Il a contacté <strong>Paul Parker</strong>, journaliste de son état, et lui a déballé ce qu’il savait de A à Z. Parker, abasourdi par un tel scoop, a demandé un délai pour faire un article, histoire de vérifier certains éléments. Vernon lui a laissé les fausses preuves puis a foncé dans le ghetto black pour avertir les gens du B.O.L.D que toute l’histoire était un coup monté et qu’il ne fallait surtout pas tuer J.P. Ne trouvant personne à la planque habituelle du B.O.L.D, Lewis ayant jugé que prendre le large pour mieux revenir était la meilleure solution, Vernon est allé glaner des renseignements au club \"The Homeboy\" tenu par un crack-gang allié au B.O.L.D.</p><p style=\"text-align:justify\">De son côté, Sterling n’est pas resté inactif : il a envoyé un tueur, chargé du \"nettoyage\", liquider le journaliste et a mis un Technomancien vaudouisant sur la piste de ce pauvre Vernon. Et c’est là que les personnages interviennent, comme une poignée de cheveux sur la soupe… Chaud devant !</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539656118,
            "modifiedTime": 1708547602596,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 600000,
          "name": "Here comes troubles",
          "type": "text",
          "_id": "lt3KYszRnN27brCF",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Nos personnages sont bien tranquillement chez eux, lorsqu’au courrier arrive une enveloppe en provenance de Los Angeles. Cette enveloppe, adressée à un des joueurs, contient un billet d’avion aller-retour pour Los Angeles et une lettre provenant d’un certain <strong>@UUID[JournalEntry.iMiKZyFWuOQHfZTb]{Paul Parker}</strong> qui invite le joueur, ainsi que d’éventuels amis, à venir passer quelques jours dans la cité des anges. Pour des raisons évidentes de motivation, <strong>le joueur choisi connaît bien le dénommé Paul Parker</strong> pour avoir été en fac ou pour avoir travaillé avec lui. Au meneur de jeu de déterminer, d’après le background de ses joueurs, lequel d’entre est le plus apte à l'avoir connu.</p><p style=\"text-align:justify\">Paul Parker termine sa lettre en écrivant qu’il les attendra à leur descente d’avion à l’aéroport de Los Angeles à la fin de la semaine. Juste le temps de mettre quelques vêtements dans une valise, de s’occuper des visas et zou, direction Orly.</p><p style=\"text-align:justify\">Si les joueurs téléphonent au préalable à Paul Parker, celui-ci ne saura absolument rien de \"l’affaire J.P\" et se portera comme un charme. Et pour cause, il ne sera contacté par Vernon qu’au moment où l’avion des joueurs quittera le sol français.</p><p style=\"text-align:justify\">La première mauvaise surprise qui attend les joueurs en arrivant à Los Angeles, c’est que <strong>Paul Parker</strong> n’est pas là pour les attendre. Si les joueurs lui téléphonent, son adresse et son numéro de téléphone figurant sur la lettre, ils tomberont sur son répondeur. Une annonce au haut-parleur demandera aux personnages d’aller récupérer leurs bagages. C’est à ce moment que la deuxième mauvaise surprise arrivera. <strong>A peine seront-ils entrés dans la salle de réception des bagages</strong> qu’une femme se mettra à hurler. Ils pourront voir alors <strong>le corps de Paul Parker</strong> avachi sur le tapis roulant qui amène les bagages. Le corps finira sa course aux pieds des joueurs : un énorme cratère, causé par une balle de gros calibre, est situé au beau milieu du front de Paul Parker. Il va sans dire qu’il est mort. Le tintement métallique d’un <strong>trousseau de clés</strong> qui vient de tomber de la main de Parker les sortira de leur trouble. Ce sont les clés de l’appartement de Parker, ses initiales et son adresse sur le porte-clés sont là pour en attester. Le cadavre a déjà dû subir une fouille en règle car il n’a aucun papier sur lui. </p><p style=\"text-align:justify\">Autant dire qu’autour d’eux la confusion règne. </p><p style=\"text-align:justify\">La police n’arrivera sur les lieux que cinq minutes plus tard, posant des questions floues aux témoins encore présents et le tout sans grande émotion : on est bien à Los Angeles, le doute n’est plus permis.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539680502,
            "modifiedTime": 1708547757523,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 700000,
          "name": "Freedom of speech",
          "type": "text",
          "_id": "rW6LpJB3LMxy9kGg",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Le premier, et bon, réflexe des joueurs sera de <strong>se rendre au domicile du défunt Paul Parker</strong>, un quatre-pièces dans un immeuble de standing en plein quartier des affaires. La porte ne révèle pas de traces d’effraction et l’intérieur est aussi bien tenu qu’un appartement de célibataire peut l’être.</p><p style=\"text-align:justify\">Sur la table du salon trônent un dossier, deux canettes de bière et un cendrier rempli de cigarettes à moitié fumées.</p><p style=\"text-align:justify\">Le <strong>dossier</strong> renferme trois éléments :</p><ul><li><p style=\"text-align:justify\">une <strong>photo noir et blanc</strong> représentant un homme dans une robe blanche à capuchon pointu qui serre la main à un homme en costume trois-pièces,</p></li><li><p style=\"text-align:justify\">une <strong>cassette audio</strong></p></li><li><p style=\"text-align:justify\">et un <strong>document officiel</strong> émanant du bureau du gouverneur de Californie.</p></li></ul><p style=\"text-align:justify\"><em>Tous ces documents sont, bien entendu, faux et fabriqués de toutes pièces par la CIA.</em></p><h2>La photo</h2><p style=\"text-align:justify\">La photo, fruit des techniques de pointe du traitement d’image par ordinateur, met en scène @UUID[JournalEntry.QmHtW7c2fZlqnGSX]{Edward Hardbolt Jr}, grand dragon du KKK de Californie, et @UUID[JournalEntry.Ys5AovKBMDos0Hn6]{Jason Prescott}, gouverneur de Californie.</p><p style=\"text-align:justify\">Si l’<strong>identification de Jason Prescott sera facile</strong> pour toute personne s’intéressant à la politique des Etats-Unis, <strong>celle de Hardbolt Jr sera très difficile</strong>. Pour avoir ces renseignements, les joueurs devront s’adresser à un spécialiste de la politique américaine (journaliste, professeur de sciences politiques, militant anti-raciste ou raciste, etc.) qui restera interloqué devant une telle image qui ne coïncide pas avec les opinions affirmées par les deux protagonistes qui se haïssent et s’attaquent publiquement.</p><p style=\"text-align:justify\"><strong>Deviner que cette photo est un faux</strong> ne sera possible qu’à un expert en traitement d’image par ordinateur comme par exemple… un dragon bleu travaillant dans les médias. Si les personnages connaissent un dragon bleu ayant des moyens techniques hyperperformants d’analyse, il pourra dire que cette image est truquée en une dizaine d’heures. Sinon, par d’autres moyens, il faudra compter une semaine.</p><h2>La cassette</h2><p style=\"text-align:justify\">La cassette contient l’enregistrement d’une conversation téléphonique entre deux personnes, dont l’une d’elle s’avère être la voix trafiquée de J.P. Les propos échangés dans cette conversation sont éminemment racistes et se concluent par la phrase suivante :</p><blockquote><p>\"Ne vous inquiétez pas, si je suis élu, les métèques de toutes les espèces vont en baver\".</p></blockquote><p style=\"text-align:justify\">C’est évidemment la voix de J.P qui prononce cette phrase.</p><p style=\"text-align:justify\">Ici aussi, il faut être expert pour pouvoir crier à l’imposture… quoique avec un bon Macintosh et les logiciels appropriés.</p><h2>Le document officiel</h2><p style=\"text-align:justify\">Le dernier document est une <strong>demande d’avis d’expulsion concernant tout un quartier noir de Los Angeles,</strong> soit à peu près trois cents familles, pour construire un centre commercial à la place. La lettre est <strong>signée par J.P</strong>.</p><h2>Encore un indice</h2><p style=\"text-align:justify\">Dernier indice, et pas des moindres, présent dans l’appartement du journaliste : un <strong>message sur son répondeur</strong>. Ce message, avec en bruit de fond un air de rap et un brouhaha de conversations, est le suivant :</p><blockquote><p style=\"text-align:justify\">\"Parker, c’est Vernon. Je suis actuellement au club \"The Homeboy\", au coin de la cinquième et de la vingtième. Rejoignez-moi là-bas.</p><p style=\"text-align:justify\">Je... oh, merde !... qu’est ce que…\".</p></blockquote><p style=\"text-align:justify\">La suite du message se perd dans le bruit d’une rafale d’arme automatique et d’un objet en verre qui se brise. Le message s’arrête là.</p><p style=\"text-align:justify\">Les joueurs ont désormais trois pistes à explorer :</p><ul><li><p>un certain Vernon dans un club dénommé \"The Homeboy\", c’est la @UUID[.i7EVX7FUJL9JIUee]{piste la plus immédiate}</p></li><li><p>@UUID[.jbHlosya1LARkFPz]{Jason Prescott}</p></li><li><p>et @UUID[.EVPxe66oBnWU4pch]{Edward Hardbolt}, seulement après s’être renseignés.</p></li></ul><p></p><h2>Une dernière chose</h2><p style=\"text-align:justify\">Dans les éditions du soir des journaux télévisés, de la presse et de la radio, on annoncera la mort de Parker et le fait que la police recherche un certain Vernon Lewis, un jeune homme noir lié aux gangs, suspect numéro un dans ce crime. Il serait, selon la police, armé et dangereux.</p><p style=\"text-align:justify\">C’est le dernier cadeau de la CIA à Vernon ; la chasse à l’homme est ouverte.</p>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539692214,
            "modifiedTime": 1708724445529,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 800000,
          "name": "There goes the neighborhood",
          "type": "text",
          "_id": "i7EVX7FUJL9JIUee",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">\"The Homeboy\" est situé au fin fond de la zone où la guerre des gangs fait rage. </p><p style=\"text-align:justify\">Si les joueurs veulent s’y rendre en taxi, ils devront payer double tarif. </p><p style=\"text-align:justify\">Le @UUID[Scene.nTOTxNIBOtYhwVwH]{quartier} est composé à quatre-vingt-dix pour cent de noirs, tous pauvres, chômeurs et confrontés quotidiennement à la violence.</p><p style=\"text-align:justify\">Un blanc qui se balade dans ce coin ne peut être qu’un flic ou un fou, et souvent les deux. Autant dire que les personnages de race blanche vont recevoir un accueil plus que glacial.</p><p style=\"text-align:justify\">Le club est un bouge comme il en existe beaucoup dans les environs. C’est aussi le quartier général d’un gang : les \"@UUID[JournalEntry.QI4XFvPhZ7XmvUIX]{Beasts}\". Son chef, Ernie-D, est un ami du B.O.L.D auquel il fournit des armes et de l’argent pour soutenir \"la cause\". Ernie-D est un dur, un Warrior. Il n’hésite pas à exhiber le magnifique 357 Magnum qui orne sa ceinture, pour un oui ou pour un non.</p><p style=\"text-align:justify\">Il est néanmoins un allié de poids pour Lewis et ses terroristes. Lewis lui accorde une confiance illimitée, Ernie-D ayant toujours été loyal envers le B.O.L.D. <em>Si vous vous en sentez capable, faites parler Ernie-D en rap : c’est son péché mignon et ça promet un grand moment de role-playing. Avis aux amateurs.</em></p><p style=\"text-align:justify\">Le club est, la majeure partie du temps, un havre de paix pour les \"Beasts\". Bar durant la journée, il se transforme en boîte passé 22 heures. Toutes les personnes qui fréquentent cet endroit sont plus ou moins liées au gang. La décoration se résume à quelques portraits de leaders noirs : Martin Luther King, Malcom X, etc.</p><p style=\"text-align:justify\">Du rap passe en permanence et il n’est pas une heure sans que ne soit diffusé l’incontournable \"Cop Killer\" d’Ice-T.</p><p style=\"text-align:justify\"><strong>Lorsque les personnages arriveront</strong>, le club sera en ébullition. Le gang vient d’être attaqué par des inconnus dans son club, sur son territoire et un ami du gang a été enlevé. Il y a eu une offense et le gang est sur les dents. En entrant, les personnages feront tomber un silence de mort et seront dévisagés par tous les clients, puis l’animation reviendra. Ils pourront remarquer des impacts de balles sur le comptoir et les murs. Au bout de quelques minutes, Ernie-D viendra les voir. Tous les regards seront alors sur eux. Ernie-D pense que les joueurs sont des flics et il vient leur apprendre que le patron ici, c’est lui. Si les joueurs sont diplomates et ne sont pas agressifs, c’est-à-dire s’ils ne jouent pas les gros bras, ils pourront savoir ce qui s’est passé au club. Par contre, s’ils sont arrogants ou violents, les UZI sortiront des bombers et les joueurs se retrouveront en un clin d’oeil avec une vingtaine de canons sous le nez. Les \"Beasts\" n’hésiteront pas à s’en servir, d’autant plus facilement qu’ils en ont l’habitude.</p><p style=\"text-align:justify\">Donc, si les joueurs ont réussi à amadouer Ernie-D, celui-ci leur racontera la scène suivante, dans un langage très imagé ponctué de \"Motherfuckin\" \" et de \"Yeah, Man\" : </p><blockquote><p style=\"text-align:justify\">Dans l’après-midi, un homme étrange, habillé de noir avec un grand chapeau et des colifichets plus ou moins morbides autour du cou (crânes minuscules, ossements, gris-gris), a débarqué dans le club, accompagné de deux énormes molosses en chemises hawaiiennes et lunettes noires. Ils semblaient tous d’origine haïtienne. L’homme au chapeau a demandé où était Vernon d’un air désinvolte et qu’il fallait le lui livrer maintenant. Vernon, qu’Ernie connaît un peu , était bien dans le bar à ce moment-là et donnait un coup de téléphone.</p><p style=\"text-align:justify\">Ernie-D, qui n’aime pas qu’on lui donne des ordres chez lui, a répondu au type d’aller se faire voir. De plus, Vernon étant l’ami de ses amis, il n’allait pas le livrer à ces olibrius qui ne semblaient pas guidés par l’amour de leur prochain.</p><p style=\"text-align:justify\">A peine Ernie-D avait-il commencé sa phrase que les deux molosses se sont mis à mitrailler le bar, créant un bordel monstre. L’homme au chapeau a lancé une bouteille par terre à ce moment et la salle s’est remplie d’une fumée blanche. Personne ne pouvait plus bouger, comme paralysé. Puis la fumée s’est dissipée. Les trois Haïtiens avaient disparu, ainsi que Vernon.</p></blockquote><p style=\"text-align:justify\">Ernie n’avait jamais vu ces hommes auparavant ; mais il jure bien que s’il leur remet la main dessus, ils vont le regretter.</p><p style=\"text-align:justify\">Si les joueurs posent des questions sur Vernon, Ernie-D avouera ne pas savoir grand chose sur lui. Mais c’est sans doute un type bien puisqu’il est l’ami de ceux qui défendent \"la cause\". Puis se rendant compte qu’il en a trop dit, il ordonnera aux personnages de finir leur verre et de déguerpir.</p><p style=\"text-align:justify\">Il ne dira plus rien et tournera les talons pour signifier que la conversation est terminée.</p><p style=\"text-align:justify\">Cet épisode ouvre une nouvelle piste aux joueurs : l’Haïtien au grand chapeau et aux colifichets.</p><p style=\"text-align:justify\">Une personne ayant des connaissances en religions exotiques ou en sorcellerie pourra facilement faire le lien entre la description de cet homme et le vaudou.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539725058,
            "modifiedTime": 1708721281614,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 900000,
          "name": "Kalifornia über alles",
          "type": "text",
          "_id": "EVPxe66oBnWU4pch",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Si les joueurs arrivent à identifier @UUID[JournalEntry.QmHtW7c2fZlqnGSX]{Edwin Hardbolt Jr}, ils pourront trouver son adresse dans l’annuaire.</p><p style=\"text-align:justify\">Il habite dans une @UUID[Scene.epsNPr821UzkPCbM]{sorte de ranch fortifié} sur les hauteurs de Santa Monica. Là-bas, le KKK a pignon sur rue et Hardbolt est considéré comme un notable un peu \"excentrique\". Excentrique peut-être, dangereux sûrement.</p><p style=\"text-align:justify\">Il ne quitte jamais son ranch, sauf pour des conférences de presse, des marches de protestation ou… des actions visant à terroriser la population noire. Il est toujours accompagné d’une dizaine de gardes du corps, tous grands, blonds, rasés et armés de M-16.</p><p style=\"text-align:justify\">Le ranch sert également de camp d’entraînement paramilitaire pour les membres du KKK qui le désirent. Cela signifie qu’il y a en permanence une trentaine d’hommes armés dans le ranch.</p><p style=\"text-align:justify\">Si les personnages veulent rencontrer Hardbolt, le mieux est de se faire passer pour des journalistes désirant une interview. Hardbolt adore voir sa tête dans les journaux. Malheureusement pour les joueurs, Hardbolt ne sait strictement rien sur l’affaire qui les intéresse.</p><p style=\"text-align:justify\">Si les personnages lui parlent ou lui montrent la photo truquée, il entrera dans une rage folle en croyant que les personnages cherchent à le discréditer auprès des membres du KKK. Il niera, avec force cris, toute relation avec \"ce nègre blanc communiste de Jason Prescott à la solde du complot judéo-maçonique\". Et les joueurs se feront mettre à la porte manu militari par une dizaine de représentants de la race aryenne.</p><p style=\"text-align:justify\">Si les joueurs insistent, le débat peut rapidement tourner au carnage.</p><p style=\"text-align:justify\">Retour à la case départ.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539739532,
            "modifiedTime": 1708723300314,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 1000000,
          "name": "Just another victim",
          "type": "text",
          "_id": "jbHlosya1LARkFPz",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Contacter Jason Prescott, après identification, va vite se transformer en un véritable casse-tête pour les joueurs. La vie d’un futur candidat à la Maison Blanche ressemble plus à un marathon incessant qu’à une promenade de santé. J.P n’est en fait que rarement présent à Los Angeles, plus occupé qu’il est à faire sa promotion à travers tout le pays.</p><p style=\"text-align:justify\">En téléphonant à son bureau, la secrétaire répondra que \"Monsieur le gouverneur Prescott\" est en déplacement ou en conférence. En bref, il est impossible d’obtenir un rendez-vous. Si les joueurs insistent sur le danger ou sur l’urgence à lui parler, la secrétaire leur passera son assistante. Se déplacer directement au bureau aboutirait au même résultat.</p><p style=\"text-align:justify\">Son assistante, @UUID[JournalEntry.zwZf5oX3ZWrTTdsS]{Miss Johanna Wallace}, acceptera de les recevoir si les joueurs se montrent convaincants.</p><p style=\"text-align:justify\">Cette jeune femme, en fait un dragon doré, a été choisie par son grand-père à choisi pour aider le candidat le plus \"humain\" à accéder à la présidence. C’est elle qui a sélectionné Jason Prescott parmi la foultitude de candidats au poste et c’est elle qui est à la base du succès médiatique de J.P. Pour elle, J.P symbolise sa réussite et elle a mis en lui tous ses espoirs. Belle, sympathique et chaleureuse, elle monte néanmoins très vite en pression dès que l’on touche à son candidat, qu’elle considère comme son chef-d’oeuvre.</p><p style=\"text-align:justify\">Si le dragon du groupe est un dragon doré, il connaîtra Johanna, mais pas sa mission, et elle le connaîtra, même si c’est un dragon rebelle. Cela n’influencera en rien le point de vue de Johanna.</p><p style=\"text-align:justify\">Les personnages rencontreront Miss Wallace dans son bureau. Elle leur demandera d’être brefs dans l’exposé de leur problème. Si les personnages dégoisent ce qu’ils savent, elle fera la moue et exigera des preuves. Elle demeurera un temps stupéfaite en examinant celles-ci et énoncera son verdict : les documents sont des faux ! Johanna commencera à sentir une arnaque. Pour être fixée rapidement sur l’honnêteté des personnages, elle lancera un sort de séduction sur un joueur de sexe masculin, histoire de lui tirer les vers du nez.</p><p style=\"text-align:justify\">Elle procédera alors de la manière suivante : elle fera tomber d’un air distrait une bague enchantée, qui contient le sort de séduction, devant un membre du groupe. Celui (ou celle) qui la ramassera subira l’effet du sort. Johanna se mettra aussitôt à bombarder sa victime de questions sur la véracité de leurs dires. Satisfaite, elle accordera sa confiance aux joueurs et ceux-ci auront désormais une alliée utile.</p><p style=\"text-align:justify\">Si un des joueurs s’aperçoit que Johanna a lancé un sort et s’il le lui fait remarquer, elle se rendra compte qu’elle n’a pas affaire à n’importe qui.</p><p style=\"text-align:justify\">Sur la défensive, elle leur demandera qui ils sont \"réellement\". Elle jouera franc-jeu, si les joueurs lui donnent leur véritable identité, claironnant fièrement qu’elle est la petite fille d’Ancyte.</p><p style=\"text-align:justify\">Elle n’a pas de théorie sur ce qui se passe ou sur celui qui tire les ficelles dans l’ombre, trop de gens étant désireux de voir disparaître (politiquement et physiquement) son protégé. De plus, les joueurs n’ont pas assez de preuves pour accuser qui que ce soit. Johanna demandera plus de renseignements aux joueurs pour pouvoir agir. Elle se proposera également d’apporter la preuve que les documents sont des faux, elle en a d’ailleurs les moyens. Lui parler de l’homme au chapeau d’origine haïtienne peut se révéler payant, car elle dispose d’un petit réseau d’informateurs. Quoi qu’il en soit, Johanna demandera aux joueurs de poursuivre leurs investigations et de la tenir au courant de leurs progrès.</p>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539751186,
            "modifiedTime": 1708724349261,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 1100000,
          "name": "Voodoo",
          "type": "text",
          "_id": "59MRDkth6fqVS4lw",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Les joueurs vont sans doute se lancer à la recherche de \"l'homme au chapeau\". Si les joueurs ont compris que cette personne est liée au vaudou, leur enquête va en être grandement facilitée.</p><p style=\"text-align:justify\">L’homme est en effet connu pour organiser des rituels vaudou bidon pour des stars un peu crédules de Beverly Hills. Celui-ci est en fait un technomancien et ces cérémonies de pacotille lui permettent de financer ses recherches. Il faut bien vivre. @UUID[JournalEntry.MH2OfwG4Y387JmEL]{Joseph Mobondi, alias \"Oncle Jo\"} pour ses fidèles, est connu comme le loup blanc dans les milieux branchés de Beverly Hills. Il l’est aussi dans de nombreuses boutiques qui vendent des articles de sorcellerie au rabais pour les satanistes de la région. C’est dans une de ces boutiques que les joueurs pourront glaner les renseignements suivants. Oncle Jo habite une @UUID[Scene.aRKahXzuHSOeMX4i]{immense villa en pierre} qui donne sur la plage de Beverly Hills. Si les joueurs pataugent trop, ils recevront un coup de fil de Johanna qui leur donnera les informations ci-dessus, grâce à ses contacts.</p><p style=\"text-align:justify\">Joseph Mobondi est nettement plus fin que son apparence ne le laisse croire. Ce petit haïtien est un <strong>puissant technomancien</strong>, qui a su se préserver de la curiosité des dragons grâce à son masque de Grand-Guignol. Il faut bien l’avouer, \"Oncle Jo\" n’est pas crédible au premier abord, mais à force de travail, il est devenu un expert en ce qui concerne la magie découlant des rituels vaudou.</p><p style=\"text-align:justify\">Il est d’ailleurs flanqué de @UUID[JournalEntry.T2SnjVx9XWEe7SdV]{deux gardes du corps} en voie de zombification qui sont la preuve \"vivante\" de ses pouvoirs magiques.</p><p style=\"text-align:justify\">Pourtant, Mobondi vient de se heurter à un petit problème dans sa progression en magie alchimique.</p><p style=\"text-align:justify\">En effet, depuis peu, un \"@UUID[JournalEntry.VofTtywo0cnWFDc0]{fils à papa}\" est venu s’installer dans le coin et a raflé tous les ouvrages contenant des rituels vaudou. Mobondi se trouve aujourd’hui bloqué dans ses recherches par manque de documents. Il ne peut les voler car son concurrent a lancé sur l’endroit où il cache les livres un sort de protection qui empêche Mobondi et ses \"créations\" de s’en approcher.</p><p style=\"text-align:justify\">Ruminant sa vengeance, il a été agréablement surpris par un coup de téléphone anonyme lui indiquant où il pouvait trouver un être magique africain… Une aubaine pour un technomancien vaudouisant. Aussitôt dit, aussitôt fait. Il va à l’adresse indiquée par l’informateur inconnu, repère l’être magique, paralyse l’assemblée par un sort et repart avec son gibier. Malheureusement, le gibier en question se révèle vite décevant. Vernon n’est en effet qu’à la phase 2 de son évolution.</p><p style=\"text-align:justify\">Il n’est donc d’aucune utilité au technomancien.</p><p style=\"text-align:justify\">Tant pis, se dit-il, ça doit quand même intéresser quelqu’un. Vernon est donc pour l’instant dans la cave d’\"Oncle Jo\", en attendant des jours meilleurs. Mobondi, quant à lui, attend bien gentiment d’éventuels acquéreurs pour son pensionnaire forcé.</p><p style=\"text-align:justify\">La villa de Mobondi est <strong>surveillée par un réseau vidéo perfectionné</strong>, directement relié au bureau du propriétaire. Si les joueurs font une planque devant la villa, un des deux colosses viendra les inviter à voir son maître. Sinon, ils pourront entrer directement par la grande porte sans comité d’accueil. Lorsqu’ils arriveront dans le hall, ils découvriront une salle toute en marbre blanc remplie de masques africains en bois et de plantes exotiques. Le sol est <strong>recouvert d’une fine poudre blanche</strong>, que les joueurs identifieront comme étant du sucre, s’ils la goûtent. Au fond de la salle se trouve un immense bureau en marbre, où des écrans vidéo sont incrustés, devant une baie vitrée donnant sur la mer. Le siège installé entre la baie vitrée et le bureau pivotera et leur faisant face, profondément enfoncé dedans, ils découvriront un Joseph Mobondi souriant avec un verre à la main.</p><p style=\"text-align:justify\">Dans ce verre au beau milieu d’un liquide ambré flottent des petits morceaux de chair.</p><p style=\"text-align:justify\">En fait, <strong>ce verre contient un sort extrêmement puissant de crémation</strong> qui se déclenche en entrant en contact avec le sucre répandu dans la pièce, transformant celle-ci en une fournaise mortelle.</p><p style=\"text-align:justify\">Le technomancien a tout de suite compris qui pouvait être intéressé par Vernon et le sort est une sorte d’assurance-vie pour ce dernier qui, en cas d’agression de la part des personnages, sauvera sa peau en se jetant à travers la baie vitrée. Durant la conversation qui va suivre, Mobondi ne cessera d’agiter son verre, mais n’en boira jamais une goutte. De leur côté, les deux \"zombis\" (puisque c’est leur nom) garderont la sortie, un fusil d’assaut à la main.</p><blockquote><p style=\"text-align:justify\">\"Que me vaut l’honneur de la visite d’un dragon et de son gestalt ?\" <em>dira gaiement Mobondi en guise d’introduction.</em></p></blockquote><p style=\"text-align:justify\">Il avouera rapidement détenir Vernon et racontera même comment il a connu son existence. II sera prêt à livrer Vernon aux joueurs, <strong>en échange d’un petit service</strong> : aller lui chercher quelques livres qu’il a oubliés chez un ami du nom de Batou Nemma.</p><p style=\"text-align:justify\">Si les joueurs acceptent le deal, il leur indiquera l’@UUID[.LQZw1LgB8jJKRbAY]{adresse de Nemma}, ainsi que l’endroit où il cache ses ouvrages. Le sort de protection n’affecte que les créatures liées au vaudou, ainsi que leur créateur. Mobondi n’a aucun intérêt à ce que les personnages meurent dans cette aventure car il a besoin des livres. Il échangera Vernon contre les livres de sorts dès que les joueurs les auront en leur possession. Il tiendra parole et cela sans entourloupe.</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539759972,
            "modifiedTime": 1708728674208,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 1200000,
          "name": "Thieves",
          "type": "text",
          "_id": "LQZw1LgB8jJKRbAY",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">@UUID[JournalEntry.VofTtywo0cnWFDc0]{Batou Nemma} est le fils d’un riche industriel haïtien qui a trouvé dans la magie alchimique le moyen de combler la vacuité de sa vie. Il s’est intéressé à la magie de son pays, le vaudou. Cette quête de connaissances s’est vue grandement facilitée par un financement parental important.</p><p style=\"text-align:justify\">Nemma vient de s’installer dans une @UUID[Scene.sWmbM3xKgydA4qPN]{maison sur un quai à Venice}, quartier huppé de Los Angeles.</p><p style=\"text-align:justify\">Nemma débute dans sa branche, mais, pour éviter de voir ses richesses pillées par un concurrent, il a confectionné un sort interdisant l’accès de sa maison aux pratiquants et aux créatures du vaudou.</p><p style=\"text-align:justify\">Nemma ne chasse pas les dragons et les êtres magiques, il préfère de loin acheter leurs organes à un réseau de chasseurs.</p><p style=\"text-align:justify\">La maison, qui comporte deux étages et un sous-sol, est située sur un quai désaffecté de Venice.</p><p style=\"text-align:justify\">Ce qui permet à Nemma de pouvoir faire ses expériences en toute tranquillité. La maison est gardée par six @UUID[JournalEntry.riDd8zOMEuaPBqtN]{mercenaires} bénéficiant d’un équipement au top de la profession. <strong>Ils se répartissent de la manière suivante</strong> : </p><ul><li><p style=\"text-align:justify\">un dehors, </p></li><li><p style=\"text-align:justify\">deux au rez-de-chaussée </p></li><li><p style=\"text-align:justify\">deux à l’étage, </p></li><li><p style=\"text-align:justify\">un à la cave qui sert de labo.</p></li></ul><h2>Le laboratoire</h2><p style=\"text-align:justify\">La <strong>cave</strong> a une configuration un peu spéciale : elle est construite dans le quai, c’est-à-dire que Nemma a creusé les fondations pour y installer son labo. L’avantage est qu’il peut évacuer les \"expériences\" malheureuses, grâce à un tunnel qui lui donne un accès sur la mer. C’est par ce tunnel que les personnages pourront facilement pénétrer de nuit dans le labo. Sinon le laboratoire renferme tout ce que la technologie fait de mieux : ordinateur performant, scanner, laser et rayons X, microscope électronique, etc. </p><p style=\"text-align:justify\">De même, Nemma possède une <strong>pièce réfrigérée</strong> contenant de nombreux organes et composantes dont cinq griffes de dragon noir, un coeur de sirène et du sang de troll. </p><p style=\"text-align:justify\">Les <strong>livres de magie</strong> sont enfermés dans un coffre-fort à fermeture électronique scellé dans le mur. Le mercenaire chargé de surveiller le labo est posté devant le sas donnant sur le tunnel.</p><h2>L'emploi du temps de Nemma</h2><p style=\"text-align:justify\">Il ne change pas d’un jour à l’autre. Il va se faire dorer la pilule à la plage l’après-midi, puis il travaille dans son laboratoire durant la nuit, enfin il se couche à l’aube et dort jusqu’à midi.</p><p style=\"text-align:justify\">Le seul risque que les personnages courent est de déranger Nemma dans ses activités nocturnes.</p><p style=\"text-align:justify\">Celui-ci n’est pas fou et donnera même les livres aux joueurs pour conserver la vie sauve. Il n’en a d’ailleurs plus l’utilité, puisqu’il a tout mis sur disquettes. Mais si les joueurs en veulent à sa vie, il n’hésitera pas à déclencher un système de projection de gaz mortel. Le système est à commande vocale (le mot de code est \"alerte 10\"). Le gaz se répandra en dix secondes et causera un empoisonnement de puissance importante (résultats à lire sur la table de combat à distance). Nemma possède une dose d’antidote sur lui (5 doses).</p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708539769630,
            "modifiedTime": 1708540919898,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 1300000,
          "name": "Bring the noise",
          "type": "text",
          "_id": "Yi7plklG1jPiGvWm",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Les joueurs doivent normalement avoir récupérer Vernon, à moins qu’ils n’aient échoué dans l’opération de récupération des livres. Ils ont désormais devant eux un Vernon fatigué et affaibli par la captivité. Sa première réaction est de remercier les personnages. Puis il leur demandera d’un air méfiant s’ils sont de la CIA. Une fois que les personnages auront expliqué la raison de leur présence, il sera rassuré et leur déballera toute l’affaire : Sterling, le B.O.L.D, les faux documents, les tueurs à ses trousses, Paul Parker et sa capture au club.</p><p style=\"text-align:justify\">Puis, l’air horrifié, il demandera aux joueurs si le gouverneur Prescott est toujours vivant car il est sûr que le B.O.L.D projette toujours de l’assassiner dans les jours à venir. Il ne sait pas où le joindre pour lui révéler le complot.</p><p style=\"text-align:justify\">Un coup de fil au bureau de Johanna Wallace leur indiquera qu’elle participe à une @UUID[.N4v09oWMQxVBkmPs]{conférence de presse} avec Jason Prescott dans la tour Rockfeller. </p>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708540923600,
            "modifiedTime": 1708857934501,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 1400000,
          "name": "Black & white & red ail over",
          "type": "text",
          "_id": "N4v09oWMQxVBkmPs",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\">Parvenus à ce stade de l’aventure, les joueurs doivent se douter que l’attentat va avoir lieu pendant cette conférence. Il va maintenant falloir jouer serré.</p><p style=\"text-align:justify\">Lewis et le B.O.L.D ont maintenu leur projet d’assassinat. Leur plan d’action est simple : un sniper est caché sur le toit de l’immeuble en face de la salle de conférence, un membre du B.O.L.D est placé dans la foule de journalistes qui questionnent J.P et Lewis monte la garde, déguisé en flic, dans le couloir donnant sur la salle.</p><p style=\"text-align:justify\">Bubble-Jack, fondu dans la masse, avertira télépathiquement (grâce au pouvoir du gestalt) le sniper, Brain-Chuck, quand J.P montera à son tour à la tribune. Brain-Chuck tirera alors sur la personne présente à la tribune. Pendant l’opération, Lewis a pour rôle d’empêcher des importuns ou des flics de venir troubler l’opération en pénétrant dans la salle. Si le cas se présente, il lancera d’abord un sort de confusion avant de rentrer dans le tas. </p><p style=\"text-align:justify\">Une fois le crime perpétré, profitant de la panique générale, Bubble-Jack ira rejoindre Lewis dans le couloir. Puis, ils s’enfuiront grâce à une voiture qui les attend au parking souterrain de la tour. S’ils rencontrent des représentants de la loi sur leur chemin, ils se feront passer pour des flics. Pendant ce temps, Brain-Chuck descendra du toit de son immeuble et s’enfuira dans une autre voiture stationnée au coin de la rue.</p><p style=\"text-align:justify\">Les joueurs peuvent stopper l’opération en expliquant calmement à Lewis que c’est un complot orchestré par la CIA. Il ne croira évidemment pas les joueurs sur parole ; si, par contre, les joueurs sont accompagnés de Vernon et qu’ils démontrent que les documents sont des faux, Lewis enverra des messages télépathiques à Bubble-Jack et à Brain-Chuck pour annuler l’opération.</p><p style=\"text-align:justify\">Durant toute la conversation, Lewis bloquera le passage qui mène à la salle de conférence. Toute action pour essayer de briser de force son blocus ne ferait que déclencher une réaction violente de sa part. Il essayera alors de tuer les personnages pour qu’ils ne viennent pas gâcher l’opération.</p><p style=\"text-align:justify\">Si les personnages ne se décident pas à intervenir à temps lors de la conférence ou s’ils n’arrivent pas à convaincre Lewis car ils ne sont pas accompagnés de Vernon et n’ont pas la preuve que les documents sont truqués, l’opération suivra son cours jusqu’à son terme. Mais l’assassinat échouera quand même, suite à une erreur de Bubble-Jack qui enverra le message télépathique trop tôt. Dans ce cas, c’est Johanna Wallace qui héritera de la balle mortelle destinée à J.P.</p>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708540931870,
            "modifiedTime": 1708870126578,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        },
        {
          "sort": 1500000,
          "name": "Conclusion",
          "type": "text",
          "_id": "YdiwexUMc4k3cdEY",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p style=\"text-align:justify\"><strong>Si les joueurs réussissent à déjouer complètement le complot</strong>, Lewis et Vernon les remercieront de leur avoir évité de commettre une erreur fatale et ils se volatiliseront dans la nature avec les autres membres du B.O.L.D. Johanna Wallace les assurera de la gratitude de son grand-père. La gratitude d’Ancyte est toujours bonne à prendre et pourra peut-être leur servir un jour prochain s’ils croisent sa route. </p><p style=\"text-align:justify\">Quant à Sterling, suite à une enquête de la commission sénatoriale, il prendra la fuite et ira rejoindre une organisation néo-nazie au Paraguay. La justice des Etats-Unis les condamnera par contumace à la prison à perpétuité pour le meurtre de Paul Parker et pour atteinte à la sûreté de l’Etat. Il sera dorénavant recherché par ses anciens amis de la CIA.</p><p style=\"text-align:justify\"><strong>Si les joueurs ont échoué</strong>, la situation ne sera pas brillante. Les membres du B.O.L.D périront un par un, tués par les sbires de Sterling. Vernon sera arrêté par la police pour le meurtre de Paul Parker, puis il sera envoyé dans un asile psychiatrique car personne ne croira à son histoire de complot et le jury le déclarera fou. Si les personnages n’ont pas réussi à délivrer Vernon des mains de Mobondi, ce dernier le passera par les armes.</p><p style=\"text-align:justify\">Les joueurs porteront la responsabilité de la mort de Johanna vis-à-vis de son grand-père. Gageons qu’à leur prochaine rencontre avec Ancyte, il saura s’en souvenir.</p>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708540941776,
            "modifiedTime": 1708872177049,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708538099936,
        "modifiedTime": 1708857934501,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Joseph Mobondi dit \"Oncle Jo\"",
      "_id": "MH2OfwG4Y387JmEL",
      "pages": [
        {
          "sort": 100000,
          "name": "Joseph Mobondi dit \"Oncle Jo\"",
          "type": "text",
          "_id": "RS6xwfJsvKRlx7yL",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Haïtien d’une trentaine d’années d’allure chétive. </p><p>Toujours habillé dans le style vaudou (vêtements noirs, en cuir de préférence) et inséparable de son grand chapeau noir et de ses lunettes noires. </p><p>Son torse est surchargé de gris-gris.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Joseph-Mobondi-dit-Oncle-Jo.jpg\" /><section id=\"secret-5DADKqq2BpzkWelF\" class=\"secret\"><p>@UUID[Actor.OF0NCWVBeJHFXA9x]{Joseph Mobondi dit \"Oncle Jo\"}</p></section>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708697559877,
            "modifiedTime": 1708697611460,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541146736,
        "modifiedTime": 1708697611460,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Les Beasts",
      "_id": "QI4XFvPhZ7XmvUIX",
      "pages": [
        {
          "sort": 100000,
          "name": "Les Beats",
          "type": "text",
          "_id": "LRKkPETRTrYGMhxr",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/the-beasts.jpg\" /><section class=\"secret\" id=\"secret-YDfddyayCaMhT9y9\"><p>@UUID[Actor.52SewhDyVLPyPCuX]{Les beasts}</p></section>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708707835596,
            "modifiedTime": 1708721370671,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541211467,
        "modifiedTime": 1708721370671,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Edwin Hardbolt Jr",
      "_id": "QmHtW7c2fZlqnGSX",
      "pages": [
        {
          "sort": 100000,
          "name": "Edwin Hardbolt Jr",
          "type": "text",
          "_id": "xlWhqKBXmH6AnOoI",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Edward-Hardbolt.jpg\" />",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708712335477,
            "modifiedTime": 1708722668267,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708712330770,
        "modifiedTime": 1708722668267,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Les deux énormes Haïtiens",
      "_id": "T2SnjVx9XWEe7SdV",
      "pages": [
        {
          "sort": 100000,
          "name": "Les deux énormes Haïtiens",
          "type": "text",
          "_id": "uXLmpp5xM85JA4YW",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Enormes Haïtiens, en chemises hawaïennes, avec des lunettes de soleil à verres miroir.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/les-deux-zombis.jpg\" /><section id=\"secret-P2tK9svm1HL5bRZT\" class=\"secret\"><p>@UUID[Actor.A2XtHFT6ysQ5rKe9]{Les deux énormes Haïtiens}</p></section>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708697659380,
            "modifiedTime": 1708707431931,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541179309,
        "modifiedTime": 1708707431931,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Batou Nemma",
      "_id": "VofTtywo0cnWFDc0",
      "pages": [
        {
          "sort": 100000,
          "name": "Batou Nemma",
          "type": "text",
          "_id": "G8Lo5yUNvEmyqmbS",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Le play-boy «fils à papa» dans toute sa splendeur.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Batou-Nemma.jpg\" /><section id=\"secret-hhBQIklRodzOxOO3\" class=\"secret\"><p>@UUID[Actor.l33iKVaCmxHeqUHf]{Batou Nemma}</p></section>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708707465752,
            "modifiedTime": 1708707741506,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541193260,
        "modifiedTime": 1708707741506,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Jason Prescott",
      "_id": "Ys5AovKBMDos0Hn6",
      "pages": [
        {
          "sort": 100000,
          "name": "Jason Prescott",
          "type": "text",
          "_id": "HpJqvdpAvkNbSuez",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Jason Prescott, alias J.P pour toute l’Amérique, a tout pour plaire aux électeurs : jeune, beau, brillant et heureux en mariage, il perpétue l’imagerie d’une réussite à l’américaine. C’est un nouvel avatar du syndrome Kennedy… d’ailleurs, il a presque les mêmes idées politiques, surtout au niveau social.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Jason-Prescott.jpg\" />"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708710338972,
            "modifiedTime": 1708710383626,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 300000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708538809767,
        "modifiedTime": 1708710383626,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Paul Parker",
      "_id": "iMiKZyFWuOQHfZTb",
      "pages": [
        {
          "sort": 100000,
          "name": "Paul Parker",
          "type": "text",
          "_id": "RXL1zdRRsFGkqcRG",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Journaliste à L.A.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Paul-Parker.jpg\" />",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708696947557,
            "modifiedTime": 1708696995087,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708696925161,
        "modifiedTime": 1708696995087,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Dereck Sterling",
      "_id": "lQJaWRvD69fhnuEu",
      "pages": [
        {
          "sort": 100000,
          "name": "Dereck Sterling",
          "type": "text",
          "_id": "pEux2AG24MHG0vSy",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Chef du service infiltration de la CIA.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Dereck-Sterling.webp\" />",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708708919052,
            "modifiedTime": 1708709222884,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 200000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708538698591,
        "modifiedTime": 1708709222884,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Les mercenaires",
      "_id": "riDd8zOMEuaPBqtN",
      "pages": [],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541202278,
        "modifiedTime": 1708541202278,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "7EBVA1kLV3suDT5s",
      "name": "Johanna Wallace",
      "_id": "zwZf5oX3ZWrTTdsS",
      "pages": [
        {
          "sort": 100000,
          "name": "Johanna Wallace",
          "type": "text",
          "_id": "0ysS5gms8u2CKt6S",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Belle jeune femme blonde d’une vingtaine d’années. </p><p>Toujours habillée avec classe.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Johanna-Wallace.jpg\" /><section id=\"secret-sX1RlMvbaIzp7zcl\" class=\"secret\"><p>@UUID[Actor.WBYcrDPq3q6dErXs]{Johanna Wallace}</p></section>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708697494575,
            "modifiedTime": 1708697537031,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541133410,
        "modifiedTime": 1708697537031,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "zkDzeGGJZgKmjdXO",
      "name": "Lewis \"F.F.\" Johnson",
      "_id": "0zwZA901D66WDqsM",
      "pages": [
        {
          "sort": 100000,
          "name": "Lewis \"F.F.\" Johnson",
          "type": "text",
          "_id": "PXnocBmZFcsyq9EB",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Jeune afro-américain, petit et musclé.</p><p>Il porte le bouc et s’habille en rapeur la majeure partie du temps. Il ne se sépare jamais de son gestalt, un énorme médaillon fétiche, qu’il porte sous ses vêtements.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Lewis-Johnson.jpg\" /><section id=\"secret-RRsWoiF0iPQw2QxN\" class=\"secret\"><p>@UUID[Actor.97tkZXLKl59SwQx7]{Lewis \"F.F.\" Johnson}</p></section>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708697242425,
            "modifiedTime": 1708697386222,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 100000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708540971312,
        "modifiedTime": 1708697386222,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "zkDzeGGJZgKmjdXO",
      "name": "Bubble-Jack",
      "_id": "2xGpG2nO6yYX96XL",
      "pages": [
        {
          "sort": 100000,
          "name": "Bubble-Jack",
          "type": "text",
          "_id": "ZBDmGp9jto1b4ZQ5",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Afro-américain au crâne rasé, grassouillet.</p><p>Possède un python royal en permanence dans sa poche.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Bubble-Jack.jpg\" /><section id=\"secret-QiIArNCYruLeXOwa\" class=\"secret\"><p>@UUID[Actor.xevErWPA0NId3kWA]{Bubble-Jack}</p></section>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708697322472,
            "modifiedTime": 1708697367765,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": -100000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541066900,
        "modifiedTime": 1708697367765,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "zkDzeGGJZgKmjdXO",
      "name": "Brain-Chuck",
      "_id": "hshUmlBHOaMyqu8t",
      "pages": [
        {
          "sort": 100000,
          "name": "Brain-Chuck",
          "type": "text",
          "_id": "4pDgsZfI5DPyooMn",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Grand afro-américain au crâne rasé, à la musculature particulièrement développée. </p><p>Habillé en treillis avec des rangers.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Brain-Chuck.jpg\" /><section id=\"secret-l6lxkuncVYwP9HPA\" class=\"secret\"><p>@UUID[Actor.5Hm4o8V83Q9cATyp]{Brain-Chuck}</p></section>",
            "markdown": ""
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708697412609,
            "modifiedTime": 1708697456771,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541100932,
        "modifiedTime": 1708697456771,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "folder": "zkDzeGGJZgKmjdXO",
      "name": "Vernon Reid",
      "_id": "xIkLVLNyNDzXZBHO",
      "pages": [
        {
          "sort": 100000,
          "name": "Vernon Reid",
          "type": "text",
          "_id": "3MGJ5vEjOFKsPo1T",
          "title": {
            "show": true,
            "level": 1
          },
          "image": {},
          "text": {
            "format": 1,
            "content": "<p>Jeune homme noir d’une trentaine d’années à la musculature gracile, vêtu d’un t-shirt blanc avec un X noir imprimé devant. Son regard d’un noir profond indique sa détermination et sa droiture d’esprit. Toujours sérieux, on sent couler en lui un feu contenu proche du fauve.</p><img src=\"modules/csb-scales/scenarios/A2-SNIPE/characters/Vernon-Reid.jpg\" /><section id=\"secret-VHW5pWhfsv8FFsjr\" class=\"secret\"><p>@UUID[Actor.trmNxeN1LiPY7H3Y]{Vernon Reid}</p></section>"
          },
          "video": {
            "controls": true,
            "volume": 0.5
          },
          "src": null,
          "system": {},
          "ownership": {
            "default": -1,
            "r9x0pKEz3JGSJSrG": 3
          },
          "flags": {},
          "_stats": {
            "systemId": "custom-system-builder",
            "systemVersion": "3.0.0",
            "coreVersion": "11.315",
            "createdTime": 1708696627087,
            "modifiedTime": 1708696904679,
            "lastModifiedBy": "r9x0pKEz3JGSJSrG"
          }
        }
      ],
      "sort": 200000,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541055910,
        "modifiedTime": 1708696904679,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    }
  ],
  "scenes": [
    {
      "folder": "QCHatKkipDaKl4cs",
      "name": "La maison sur quai",
      "_id": "sWmbM3xKgydA4qPN",
      "active": false,
      "navigation": true,
      "navOrder": 400000,
      "navName": "",
      "background": {
        "src": "modules/csb-scales/scenarios/A2-SNIPE/scenes/la-maison-sur-un-quai.jpg",
        "scaleX": 1,
        "scaleY": 1,
        "offsetX": 0,
        "offsetY": 0,
        "rotation": 0
      },
      "foregroundElevation": 8,
      "width": 1024,
      "height": 1024,
      "padding": 0.25,
      "initial": {
        "x": 833,
        "y": 787,
        "scale": 1.051085541785908
      },
      "backgroundColor": "#000000",
      "grid": {
        "type": 0,
        "size": 100,
        "color": "#000000",
        "alpha": 0.2,
        "distance": 2,
        "units": "m"
      },
      "tokenVision": false,
      "fogExploration": false,
      "fogReset": 1708728783959,
      "globalLight": false,
      "globalLightThreshold": null,
      "darkness": 0,
      "drawings": [],
      "tokens": [],
      "lights": [],
      "notes": [],
      "sounds": [],
      "templates": [],
      "tiles": [],
      "walls": [],
      "playlist": null,
      "playlistSound": null,
      "journal": null,
      "journalEntryPage": null,
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708728783962,
        "modifiedTime": 1708729298283,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      },
      "foreground": null,
      "thumb": "worlds/csb-scales/assets/scenes/sWmbM3xKgydA4qPN-thumb.webp",
      "fogOverlay": null,
      "fogExploredColor": null,
      "fogUnexploredColor": null,
      "weather": ""
    },
    {
      "folder": "QCHatKkipDaKl4cs",
      "name": "La villa en pierre",
      "_id": "aRKahXzuHSOeMX4i",
      "active": false,
      "navigation": true,
      "navOrder": 300000,
      "navName": "",
      "background": {
        "src": "modules/csb-scales/scenarios/A2-SNIPE/scenes/la-villa-en-pierre.jpg",
        "scaleX": 1,
        "scaleY": 1,
        "offsetX": 0,
        "offsetY": 0,
        "rotation": 0
      },
      "foregroundElevation": 8,
      "width": 1024,
      "height": 1024,
      "padding": 0.25,
      "initial": {
        "x": 837,
        "y": 830,
        "scale": 1.0522250977491587
      },
      "backgroundColor": "#000000",
      "grid": {
        "type": 0,
        "size": 100,
        "color": "#000000",
        "alpha": 0.2,
        "distance": 2,
        "units": "m"
      },
      "tokenVision": false,
      "fogExploration": false,
      "fogReset": 1708727278457,
      "globalLight": false,
      "globalLightThreshold": null,
      "darkness": 0,
      "drawings": [],
      "tokens": [],
      "lights": [],
      "notes": [],
      "sounds": [],
      "templates": [],
      "tiles": [],
      "walls": [],
      "playlist": null,
      "playlistSound": null,
      "journal": null,
      "journalEntryPage": null,
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708727278460,
        "modifiedTime": 1708729240457,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      },
      "foreground": null,
      "thumb": "worlds/csb-scales/assets/scenes/aRKahXzuHSOeMX4i-thumb.webp",
      "fogOverlay": null,
      "fogExploredColor": null,
      "fogUnexploredColor": null,
      "weather": ""
    },
    {
      "folder": "QCHatKkipDaKl4cs",
      "name": "Le ranch",
      "_id": "epsNPr821UzkPCbM",
      "active": false,
      "navigation": true,
      "navOrder": 250000,
      "navName": "",
      "background": {
        "src": "modules/csb-scales/scenarios/A2-SNIPE/scenes/le-ranch.jpg",
        "scaleX": 1,
        "scaleY": 1,
        "offsetX": 0,
        "offsetY": 0,
        "rotation": 0
      },
      "foregroundElevation": 8,
      "width": 1024,
      "height": 1024,
      "padding": 0.25,
      "initial": {
        "x": null,
        "y": null,
        "scale": null
      },
      "backgroundColor": "#000000",
      "grid": {
        "type": 0,
        "size": 100,
        "color": "#000000",
        "alpha": 0.2,
        "distance": 2,
        "units": "m"
      },
      "tokenVision": false,
      "fogExploration": false,
      "fogReset": 1708723132355,
      "globalLight": false,
      "globalLightThreshold": null,
      "darkness": 0,
      "drawings": [],
      "tokens": [],
      "lights": [],
      "notes": [],
      "sounds": [],
      "templates": [],
      "tiles": [],
      "walls": [],
      "playlist": null,
      "playlistSound": null,
      "journal": null,
      "journalEntryPage": null,
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708723132359,
        "modifiedTime": 1708729242684,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      },
      "foreground": null,
      "thumb": "worlds/csb-scales/assets/scenes/epsNPr821UzkPCbM-thumb.webp",
      "fogOverlay": null,
      "fogExploredColor": null,
      "fogUnexploredColor": null,
      "weather": ""
    },
    {
      "folder": "QCHatKkipDaKl4cs",
      "name": "The Homeboy",
      "_id": "nTOTxNIBOtYhwVwH",
      "active": false,
      "navigation": true,
      "navOrder": 225000,
      "navName": "",
      "background": {
        "src": "modules/csb-scales/scenarios/A2-SNIPE/scenes/the-Homeboy.jpg",
        "scaleX": 1,
        "scaleY": 1,
        "offsetX": 0,
        "offsetY": 0,
        "rotation": 0
      },
      "foregroundElevation": 8,
      "width": 1024,
      "height": 1024,
      "padding": 0.25,
      "initial": {
        "x": 853,
        "y": 891,
        "scale": 1.3496754335533188
      },
      "backgroundColor": "#000000",
      "grid": {
        "type": 0,
        "size": 100,
        "color": "#000000",
        "alpha": 0.2,
        "distance": 2,
        "units": "m"
      },
      "tokenVision": false,
      "fogExploration": false,
      "fogReset": 1708720983108,
      "globalLight": false,
      "globalLightThreshold": null,
      "darkness": 0,
      "drawings": [],
      "tokens": [],
      "lights": [],
      "notes": [],
      "sounds": [],
      "templates": [],
      "tiles": [],
      "walls": [],
      "playlist": null,
      "playlistSound": null,
      "journal": null,
      "journalEntryPage": null,
      "sort": 0,
      "ownership": {
        "default": 0,
        "r9x0pKEz3JGSJSrG": 3
      },
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708720983112,
        "modifiedTime": 1708729245333,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      },
      "foreground": null,
      "thumb": "worlds/csb-scales/assets/scenes/nTOTxNIBOtYhwVwH-thumb.webp",
      "fogOverlay": null,
      "fogExploredColor": null,
      "fogUnexploredColor": null,
      "weather": ""
    }
  ],
  "tables": [],
  "macros": [],
  "cards": [],
  "playlists": [],
  "folders": [
    {
      "name": "A2 SNIPE",
      "sorting": "a",
      "folder": null,
      "type": "Scene",
      "_id": "QCHatKkipDaKl4cs",
      "sort": 0,
      "color": null,
      "flags": {
        "core": {
          "sourceId": "Folder.QCHatKkipDaKl4cs"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708536675240,
        "modifiedTime": 1708536675240,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "name": "A2 SNIPE",
      "sorting": "a",
      "folder": null,
      "type": "Actor",
      "_id": "CamixvH2froIvkRV",
      "sort": 0,
      "color": null,
      "flags": {
        "core": {
          "sourceId": "Folder.CamixvH2froIvkRV"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708536689859,
        "modifiedTime": 1708536689859,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "name": "B.O.L.D",
      "sorting": "a",
      "folder": "CamixvH2froIvkRV",
      "type": "Actor",
      "_id": "uZ8UfqmMAPMkHl5I",
      "sort": 0,
      "color": null,
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708697291301,
        "modifiedTime": 1708697291301,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "name": "A2 SNIPE",
      "sorting": "a",
      "folder": null,
      "type": "JournalEntry",
      "_id": "TNrPefJgEJW5sy92",
      "sort": 0,
      "color": null,
      "flags": {
        "core": {
          "sourceId": "Folder.TNrPefJgEJW5sy92"
        }
      },
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708536771708,
        "modifiedTime": 1708536771708,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "name": "Les personnages",
      "sorting": "a",
      "folder": "TNrPefJgEJW5sy92",
      "type": "JournalEntry",
      "_id": "7EBVA1kLV3suDT5s",
      "sort": 0,
      "color": null,
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708538107836,
        "modifiedTime": 1708538107836,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    },
    {
      "name": "B.O.L.D",
      "sorting": "a",
      "folder": "7EBVA1kLV3suDT5s",
      "type": "JournalEntry",
      "_id": "zkDzeGGJZgKmjdXO",
      "sort": 0,
      "color": null,
      "flags": {},
      "_stats": {
        "systemId": "custom-system-builder",
        "systemVersion": "3.0.0",
        "coreVersion": "11.315",
        "createdTime": 1708541074206,
        "modifiedTime": 1708541074206,
        "lastModifiedBy": "r9x0pKEz3JGSJSrG"
      }
    }
  ],
  "_id": "GSmjyqIb60tAFAXU",
  "folder": null,
  "flags": {},
  "_stats": {
    "systemId": "custom-system-builder",
    "systemVersion": "3.0.0",
    "coreVersion": "11.315",
    "createdTime": 1708536812884,
    "modifiedTime": 1708873251387,
    "lastModifiedBy": "r9x0pKEz3JGSJSrG"
  },
  "_key": "!adventures!GSmjyqIb60tAFAXU"
}
